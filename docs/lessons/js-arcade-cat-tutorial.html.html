<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Голодный Кот — Туториал MakeCode Arcade</title>
    <style>
        * { margin: 0; padding: 0; box-sizing: border-box; }

        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', sans-serif;
            background: #1a0f08;
            color: #e2e8f0;
            min-height: 100vh;
            overflow-x: hidden;
        }

        #vanta-bg {
            position: fixed;
            top: 0; left: 0;
            width: 100%; height: 100%;
            z-index: 0;
            pointer-events: none;
        }

        .container {
            position: relative;
            z-index: 10;
            max-width: 1100px;
            margin: 0 auto;
            padding: 40px 20px 60px;
        }

        /* ── header ── */
        .header {
            text-align: center;
            margin-bottom: 50px;
            animation: fadeInDown 0.8s ease-out;
        }

        .header h1 {
            font-size: 2.5em;
            margin-bottom: 12px;
            background: linear-gradient(135deg, #fbbf24, #f59e0b, #f97316);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
        }

        .header p { font-size: 1.1em; color: #94a3b8; }

        .header .badge {
            display: inline-block;
            padding: 5px 16px;
            border-radius: 20px;
            font-size: .85em;
            font-weight: 700;
            background: linear-gradient(135deg, #f59e0b, #f97316);
            color: #fff;
            margin-bottom: 14px;
        }

        .back-link {
            display: inline-block;
            margin-bottom: 18px;
            color: #f59e0b;
            text-decoration: none;
            font-weight: 600;
            font-size: 0.95em;
        }
        .back-link:hover { color: #fbbf24; }

        /* ── progress bar ── */
        .progress-bar {
            background: rgba(30, 30, 10, 0.4);
            border-radius: 20px;
            height: 10px;
            margin: 0 auto 40px;
            max-width: 600px;
            overflow: hidden;
            border: 1px solid rgba(245, 158, 11, 0.3);
        }
        .progress-fill {
            height: 100%;
            background: linear-gradient(90deg, #f59e0b, #fbbf24, #34d399);
            border-radius: 20px;
            width: 0%;
            transition: width 0.5s ease;
        }
        .progress-text {
            text-align: center;
            color: #94a3b8;
            font-size: 0.88em;
            margin-bottom: 8px;
        }

        /* ── steps ── */
        .step-card {
            background: rgba(20, 14, 8, 0.88);
            backdrop-filter: blur(12px);
            border: 1px solid rgba(245, 158, 11, 0.2);
            border-radius: 14px;
            padding: 30px;
            margin-bottom: 30px;
            animation: fadeInUp 0.7s ease-out backwards;
        }

        .step-header {
            display: flex;
            align-items: center;
            gap: 14px;
            margin-bottom: 16px;
            cursor: pointer;
        }

        .step-num {
            display: inline-flex;
            align-items: center;
            justify-content: center;
            background: linear-gradient(135deg, #f59e0b, #f97316);
            color: #fff;
            width: 40px; height: 40px;
            border-radius: 50%;
            font-weight: bold;
            font-size: 1.1em;
            flex-shrink: 0;
        }

        .step-num.done {
            background: linear-gradient(135deg, #059669, #34d399);
        }

        .step-title {
            color: #fde68a;
            font-size: 1.3em;
            font-weight: 700;
        }

        .step-time {
            margin-left: auto;
            color: #64748b;
            font-size: 0.85em;
            white-space: nowrap;
        }

        .step-body { line-height: 1.7; color: #cbd5e1; }
        .step-body p { margin-bottom: 12px; }

        /* ── code blocks — NO COPY ── */
        .code-block {
            background: rgba(10, 8, 4, 0.92);
            border: 1px solid rgba(100, 80, 40, 0.3);
            padding: 18px;
            border-radius: 8px;
            font-family: 'Courier New', monospace;
            font-size: 0.92em;
            margin: 14px 0;
            overflow-x: auto;
            color: #a1f3eb;
            line-height: 1.7;
            position: relative;
            user-select: none;
            -webkit-user-select: none;
            -moz-user-select: none;
            -ms-user-select: none;
        }

        .code-block::after {
            content: 'набирай вручную';
            position: absolute;
            top: 6px; right: 10px;
            font-size: 0.72em;
            color: #475569;
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', sans-serif;
            pointer-events: none;
        }

        .code-block .kw  { color: #c084fc; }
        .code-block .fn  { color: #60a5fa; }
        .code-block .str { color: #fbbf24; }
        .code-block .cm  { color: #64748b; }
        .code-block .num { color: #34d399; }
        .code-block .ev  { color: #fb923c; }

        /* ── SPRITE BLOCKS — COPYABLE ── */
        .sprite-block {
            white-space: pre;
            background: rgba(10, 8, 4, 0.92);
            border: 1px solid rgba(245, 158, 11, 0.35);
            padding: 14px 18px;
            border-radius: 8px;
            font-family: 'Courier New', monospace;
            font-size: 0.88em;
            margin: 14px 0;
            overflow-x: auto;
            color: #fde68a;
            line-height: 1.5;
            position: relative;
            user-select: text;
            -webkit-user-select: text;
        }

        .sprite-block::after {
            content: 'можно копировать';
            position: absolute;
            top: 6px; right: 10px;
            font-size: 0.72em;
            color: #92400e;
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', sans-serif;
            pointer-events: none;
        }

        .sprite-label {
            display: block;
            font-size: 0.8em;
            color: #f59e0b;
            font-weight: 600;
            margin-bottom: 6px;
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', sans-serif;
            user-select: none;
            -webkit-user-select: none;
        }

        .highlight {
            background: rgba(245, 158, 11, 0.2);
            padding: 2px 7px;
            border-radius: 4px;
            color: #fde68a;
            font-weight: 600;
            font-family: 'Courier New', monospace;
            font-size: 0.92em;
        }

        /* ── info boxes ── */
        .key-point {
            background: rgba(245, 158, 11, 0.07);
            border-left: 3px solid #f59e0b;
            padding: 14px 18px;
            border-radius: 6px;
            margin: 14px 0;
            line-height: 1.6;
        }
        .key-point strong { color: #fde68a; }

        .warning-box {
            background: rgba(234, 88, 12, 0.08);
            border-left: 3px solid #f97316;
            padding: 14px 18px;
            border-radius: 6px;
            margin: 14px 0;
            line-height: 1.6;
            color: #fed7aa;
        }

        .tip-box {
            background: rgba(16, 185, 129, 0.08);
            border-left: 3px solid #34d399;
            padding: 14px 18px;
            border-radius: 6px;
            margin: 14px 0;
            line-height: 1.6;
            color: #a7f3d0;
        }

        /* ── analogy boxes ── */
        .analogy {
            background: rgba(124, 58, 237, 0.06);
            border: 1px dashed rgba(124, 58, 237, 0.3);
            border-radius: 10px;
            padding: 16px 18px;
            margin: 14px 0;
        }
        .analogy-label {
            color: #c4b5fd;
            font-weight: 700;
            font-size: 0.88em;
            margin-bottom: 6px;
        }
        .analogy p { color: #cbd5e1; }

        /* ── theory ── */
        .theory {
            background: rgba(245, 158, 11, 0.04);
            border: 1px dashed rgba(245, 158, 11, 0.25);
            border-radius: 10px;
            padding: 16px 18px;
            margin: 14px 0;
        }
        .theory-label {
            color: #f59e0b;
            font-weight: 700;
            font-size: 0.88em;
            text-transform: uppercase;
            letter-spacing: 1px;
            margin-bottom: 8px;
        }

        /* ── checklist ── */
        .checklist {
            list-style: none;
            padding: 0;
            margin: 12px 0;
        }
        .checklist li {
            position: relative;
            padding: 6px 0 6px 30px;
            line-height: 1.5;
        }
        .checklist li::before {
            content: '';
            position: absolute;
            left: 0; top: 10px;
            width: 18px; height: 18px;
            border: 2px solid #f59e0b;
            border-radius: 4px;
        }

        /* ── buttons ── */
        .btn-arcade {
            display: inline-block;
            background: linear-gradient(135deg, #f59e0b, #f97316);
            color: #fff;
            font-size: 1.05em;
            font-weight: 700;
            padding: 14px 28px;
            border: none;
            border-radius: 10px;
            cursor: pointer;
            transition: .25s ease;
            text-decoration: none;
        }
        .btn-arcade:hover {
            transform: translateY(-2px);
            box-shadow: 0 6px 20px rgba(245, 158, 11, 0.4);
        }

        .btn-step {
            display: inline-block;
            background: transparent;
            color: #f59e0b;
            border: 1px solid #d97706;
            font-size: 0.92em;
            font-weight: 600;
            padding: 8px 18px;
            border-radius: 8px;
            cursor: pointer;
            transition: .25s ease;
            margin-top: 10px;
        }
        .btn-step:hover {
            background: rgba(245, 158, 11, 0.1);
            transform: translateY(-1px);
        }

        /* ── gif breaks ── */
        .gif-break {
            text-align: center;
            margin: 24px 0 8px;
            opacity: 0.9;
        }
        .gif-break img {
            max-width: 280px;
            width: 100%;
            height: auto;
            border-radius: 12px;
            border: 2px solid rgba(245, 158, 11, 0.2);
        }
        .gif-break .gif-caption {
            display: block;
            margin-top: 6px;
            font-size: 0.82em;
            color: #92400e;
            font-style: italic;
        }

        /* ── dividers ── */
        .divider {
            height: 1px;
            background: linear-gradient(90deg, transparent, rgba(245, 158, 11, 0.3), transparent);
            margin: 15px 0;
        }

        /* ── footer ── */
        .footer {
            text-align: center;
            margin-top: 50px;
            color: #64748b;
            font-size: 0.95em;
            padding: 20px 0;
        }

        /* ── toggle background ── */
        .bgToggle {
            position: fixed;
            bottom: 14px; right: 14px;
            z-index: 9999;
            padding: 10px 14px;
            border-radius: 10px;
            background: rgba(20, 14, 8, 0.85);
            backdrop-filter: blur(8px);
            border: 1px solid rgba(245, 158, 11, 0.3);
            color: #fde68a;
            cursor: pointer;
            font-size: 0.82em;
            font-weight: 600;
        }
        .bgToggle:hover {
            background: rgba(245, 158, 11, 0.15);
        }

        /* ── animations ── */
        @keyframes fadeInDown {
            from { opacity: 0; transform: translateY(-20px); }
            to   { opacity: 1; transform: translateY(0); }
        }
        @keyframes fadeInUp {
            from { opacity: 0; transform: translateY(20px); }
            to   { opacity: 1; transform: translateY(0); }
        }

        /* ── responsive ── */
        @media (max-width: 768px) {
            .header h1 { font-size: 1.8em; }
            .step-card { padding: 20px; }
            .step-header { flex-wrap: wrap; }
            .step-time { margin-left: 54px; }
            .code-block { font-size: 0.82em; padding: 14px; }
            .sprite-block { font-size: 0.8em; padding: 12px; }
        }
    </style>
</head>
<body>
    <div id="vanta-bg"></div>
    <button class="bgToggle" onclick="toggleBg()">Фон вкл/выкл</button>

    <div class="container">

        <!-- HEADER -->
        <div class="header">
            <a class="back-link" href="./js-arcade-cat-module.html">&larr; Назад к модулю</a>
            <div class="badge">MakeCode Arcade &bull; JavaScript</div>
            <h1>Голодный Кот</h1>
            <p>Простая аркада за 8 шагов &mdash; лови рыбу, избегай кактусы!</p>
        </div>

        <!-- PROGRESS -->
        <div class="progress-text">Прогресс: <span id="progressCount">0</span> / 8 шагов</div>
        <div class="progress-bar">
            <div class="progress-fill" id="progressFill"></div>
        </div>

        <!-- ═══════════════════════════════════════════
             ШАГ 0: ОТКРОЙ MAKECODE
             ═══════════════════════════════════════════ -->
        <div class="step-card" data-step="0">
            <div class="step-header" onclick="toggleStep(this)">
                <span class="step-num">0</span>
                <span class="step-title">Открой MakeCode Arcade</span>
                <span class="step-time">~2 мин</span>
            </div>
            <div class="step-body">
                <p>
                    Переходи на сайт <b>MakeCode Arcade</b>, жми <b>&laquo;New Project&raquo;</b>
                    и назови проект <b>&laquo;Hungry Cat&raquo;</b>.
                </p>
                <p>
                    Переключись в режим <b>JavaScript</b> (кнопка вверху).
                    Удали весь код &mdash; начнём с нуля.
                </p>

                <div class="analogy">
                    <div class="analogy-label">Аналогия: рецепт</div>
                    <p>
                        Писать код &mdash; как готовить по рецепту.
                        Каждая строчка &mdash; один шаг. Если пропустить шаг или
                        перепутать порядок &mdash; блюдо не получится.
                        Поэтому пишем код <b>строго по порядку, сверху вниз</b>.
                    </p>
                </div>

                <div style="text-align:center; margin-top:16px;">
                    <a class="btn-arcade" href="https://arcade.makecode.com/" target="_blank" rel="noopener">
                        Открыть MakeCode Arcade &rarr;
                    </a>
                </div>

                <button class="btn-step" onclick="markDone(0)">Готово, поехали!</button>

                <div class="gif-break">
                    <img src="https://media.giphy.com/media/JIX9t2j0ZTN9S/giphy.gif" alt="кот печатает" loading="lazy">
                    <span class="gif-caption">Ты через 5 минут</span>
                </div>
            </div>
        </div>

        <!-- ═══════════════════════════════════════════
             ШАГ 1: ФОН И НАСТРОЙКИ
             ═══════════════════════════════════════════ -->
        <div class="step-card" data-step="1">
            <div class="step-header" onclick="toggleStep(this)">
                <span class="step-num">1</span>
                <span class="step-title">Фон и начальные настройки</span>
                <span class="step-time">~3 мин</span>
            </div>
            <div class="step-body">
                <p>
                    Зададим зелёный фон (трава!) и подготовим счёт с жизнями.
                </p>

                <div class="analogy">
                    <div class="analogy-label">Аналогия: настольная игра</div>
                    <p>
                        Прежде чем играть, нужно <b>разложить поле</b> и <b>раздать фишки</b>.
                        Вот и мы сначала настроим &laquo;игровое поле&raquo; &mdash; фон, жизни и счёт.
                    </p>
                </div>

                <div class="code-block">
<span class="cm">// ===== ГОЛОДНЫЙ КОТ =====</span><br>
<br>
<span class="cm">// Зелёная трава</span><br>
scene.setBackgroundColor(<span class="num">7</span>)<br>
<br>
<span class="cm">// 3 жизни, 0 очков</span><br>
info.setLife(<span class="num">3</span>)<br>
info.setScore(<span class="num">0</span>)
                </div>

                <div class="key-point">
                    <strong>Что тут написано:</strong><br>
                    &bull; <b>scene.setBackgroundColor(7)</b> &mdash; цвет 7 = зелёный (трава)<br>
                    &bull; <b>info.setLife(3)</b> &mdash; даём коту 3 жизни (сердечки)<br>
                    &bull; <b>info.setScore(0)</b> &mdash; счёт начинается с нуля
                </div>

                <p>Нажми <b>Play</b> &mdash; увидишь зелёный экран, сердечки и нолик.</p>
                <button class="btn-step" onclick="markDone(1)">Готово!</button>
            </div>
        </div>

        <!-- ═══════════════════════════════════════════
             ШАГ 2: СОЗДАЁМ КОТА
             ═══════════════════════════════════════════ -->
        <div class="step-card" data-step="2">
            <div class="step-header" onclick="toggleStep(this)">
                <span class="step-num">2</span>
                <span class="step-title">Создаём котика</span>
                <span class="step-time">~5 мин</span>
            </div>
            <div class="step-body">
                <p>
                    Главный герой &mdash; котик! Создадим <b>спрайт</b> &mdash; картинку,
                    которая живёт на экране и может двигаться.
                </p>

                <div class="analogy">
                    <div class="analogy-label">Аналогия: наклейка на доске</div>
                    <p>
                        Спрайт &mdash; это как <b>магнитик на холодильнике</b>.
                        Он имеет картинку, находится в определённом месте,
                        и его можно двигать. Команда <code>sprites.create()</code> &mdash;
                        это как &laquo;приклеить магнитик&raquo;.
                    </p>
                </div>

                <p>Спрайт котика можно <b>скопировать</b> из блока ниже:</p>

                <div class="sprite-block">
                    <span class="sprite-label">Спрайт кота (копируй):</span>
. . . . . . . . . . . . . . . .
. . . f f . . . . . . f f . . .
. . f 9 9 f . . . . f 9 9 f . .
. f 9 9 9 9 f f f f 9 9 9 9 f .
. f 9 1 9 9 9 9 9 9 9 9 1 9 f .
. f 9 9 9 9 9 9 9 9 9 9 9 9 f .
. . f 9 9 f 9 9 9 9 f 9 9 f . .
. . . f f 9 9 9 9 9 9 f f . . .
. . . . f 9 9 9 9 9 9 f . . . .
. . . . f 9 9 9 9 9 9 f . . . .
. . . . . f 9 9 9 9 f . . . . .
. . . . . . f f f f . . . . . .
                </div>

                <p>А код набери <b>вручную</b>:</p>

                <div class="code-block">
<span class="cm">// Создаём кота</span><br>
<span class="kw">let</span> cat = sprites.create(img<span class="str">`</span><br>
&nbsp;&nbsp;<span class="cm">... вставь спрайт кота сюда ...</span><br>
<span class="str">`</span>, SpriteKind.Player)<br>
<br>
<span class="cm">// Ставим внизу экрана</span><br>
cat.setPosition(<span class="num">80</span>, <span class="num">110</span>)<br>
cat.setStayInScreen(<span class="kw">true</span>)
                </div>

                <div class="key-point">
                    <strong>Как вставить спрайт:</strong><br>
                    1. Набери <code>let cat = sprites.create(img`</code><br>
                    2. Скопируй кота из оранжевого блока и вставь<br>
                    3. Закрой: <code>`, SpriteKind.Player)</code><br><br>
                    <strong>Буквы = цвета:</strong> <b>f</b> = серый (тело), <b>9</b> = оранжевый (шёрстка), <b>1</b> = белый (глаза), <b>.</b> = пусто
                </div>

                <div class="tip-box">
                    <strong>Хочешь своего кота?</strong> Кликни на серую иконку рядом с <code>img</code>
                    в MakeCode &mdash; откроется <b>редактор спрайтов</b>. Рисуй мышкой!
                </div>

                <button class="btn-step" onclick="markDone(2)">Готово!</button>

                <div class="gif-break">
                    <img src="https://media.giphy.com/media/vFKqnCdLPNOKc/giphy.gif" alt="милый котик" loading="lazy">
                    <span class="gif-caption">Котик ждёт, пока ты его оживишь!</span>
                </div>
            </div>
        </div>

        <!-- ═══════════════════════════════════════════
             ШАГ 3: УПРАВЛЕНИЕ
             ═══════════════════════════════════════════ -->
        <div class="step-card" data-step="3">
            <div class="step-header" onclick="toggleStep(this)">
                <span class="step-num">3</span>
                <span class="step-title">Управление: бегаем влево-вправо</span>
                <span class="step-time">~3 мин</span>
            </div>
            <div class="step-body">
                <p>
                    Котик бегает <b>только влево и вправо</b> &mdash; как в тире!
                    Второе число ставим <b>0</b>, чтобы котик не летал вверх-вниз.
                </p>

                <div class="analogy">
                    <div class="analogy-label">Аналогия: тележка в магазине</div>
                    <p>
                        <code>controller.moveSprite()</code> &mdash; как привязать <b>руль</b> к тележке.
                        Первое число &mdash; скорость вбок, второе &mdash; скорость вверх/вниз.
                        Если второе = 0, тележка едет только по рельсам влево-вправо.
                    </p>
                </div>

                <div class="code-block">
<span class="cm">// Двигаем кота стрелками (только влево-вправо)</span><br>
controller.moveSprite(cat, <span class="num">100</span>, <span class="num">0</span>)
                </div>

                <div class="tip-box">
                    <strong>Попробуй:</strong> Замени <b>0</b> на <b>100</b> &mdash; кот полетит
                    во все стороны! Потом верни <b>0</b> обратно.
                </div>

                <p>Запусти &mdash; подвигай кота стрелками!</p>
                <button class="btn-step" onclick="markDone(3)">Готово!</button>
            </div>
        </div>

        <!-- ═══════════════════════════════════════════
             ШАГ 4: ПАДАЮЩАЯ РЫБА
             ═══════════════════════════════════════════ -->
        <div class="step-card" data-step="4">
            <div class="step-header" onclick="toggleStep(this)">
                <span class="step-num">4</span>
                <span class="step-title">Рыбки падают с неба</span>
                <span class="step-time">~7 мин</span>
            </div>
            <div class="step-body">
                <p>
                    Каждые 2 секунды с неба падает рыбка в случайном месте.
                    Кот должен её поймать!
                </p>

                <div class="analogy">
                    <div class="analogy-label">Аналогия: будильник</div>
                    <p>
                        <code>game.onUpdateInterval(2000, ...)</code> &mdash;
                        как <b>будильник</b>, который звонит каждые 2 секунды.
                        Каждый &laquo;звонок&raquo; запускает код внутри &mdash; создаёт новую рыбку.
                        Число 2000 = 2000 миллисекунд = 2 секунды.
                    </p>
                </div>

                <div class="sprite-block">
                    <span class="sprite-label">Спрайт рыбки (копируй):</span>
. . . . . . . . . . . .
. . . . b b b b . . . .
. . . b c c c c b . . .
. b b c c c c c c b . .
b c c c c c 1 c c c b .
. b b c c c c c c b . .
. . . b c c c c b . . .
. . . . b b b b . . . .
. . . . . . . . . . . .
                </div>

                <div class="code-block">
<span class="cm">// Каждые 2 сек — новая рыбка!</span><br>
<span class="ev">game.onUpdateInterval</span>(<span class="num">2000</span>, <span class="kw">function</span> () {<br>
&nbsp;&nbsp;<span class="kw">let</span> fish = sprites.create(img<span class="str">`</span><br>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="cm">... вставь спрайт рыбки ...</span><br>
&nbsp;&nbsp;<span class="str">`</span>, SpriteKind.Food)<br>
<br>
&nbsp;&nbsp;fish.setPosition(randint(<span class="num">10</span>, <span class="num">150</span>), <span class="num">0</span>)<br>
&nbsp;&nbsp;fish.setVelocity(<span class="num">0</span>, <span class="num">40</span>)<br>
&nbsp;&nbsp;fish.setFlag(SpriteFlag.AutoDestroy, <span class="kw">true</span>)<br>
})
                </div>

                <div class="key-point">
                    <strong>Разбираем по строчкам:</strong><br>
                    &bull; <b>SpriteKind.Food</b> &mdash; тип &laquo;еда&raquo; (для подбираемых предметов)<br>
                    &bull; <b>setPosition(randint(10, 150), 0)</b> &mdash; случайное место наверху.
                    <code>randint</code> = случайное число<br>
                    &bull; <b>setVelocity(0, 40)</b> &mdash; летит вниз со скоростью 40<br>
                    &bull; <b>AutoDestroy</b> &mdash; рыбка удаляется, когда улетает за экран
                </div>

                <p>Запусти &mdash; рыбки полетят сверху вниз!</p>
                <button class="btn-step" onclick="markDone(4)">Готово!</button>

                <div class="gif-break">
                    <img src="https://media.giphy.com/media/12E2LBt3FRcCAk/giphy.gif" alt="кот и рыба" loading="lazy">
                    <span class="gif-caption">Наш кот когда видит рыбку</span>
                </div>
            </div>
        </div>

        <!-- ═══════════════════════════════════════════
             ШАГ 5: ЛОВИМ РЫБУ
             ═══════════════════════════════════════════ -->
        <div class="step-card" data-step="5">
            <div class="step-header" onclick="toggleStep(this)">
                <span class="step-num">5</span>
                <span class="step-title">Кот ловит рыбку = +1 очко</span>
                <span class="step-time">~5 мин</span>
            </div>
            <div class="step-body">
                <p>
                    Когда кот <b>касается</b> рыбки &mdash; рыбка исчезает, а счёт растёт.
                </p>

                <div class="analogy">
                    <div class="analogy-label">Аналогия: столкновение</div>
                    <p>
                        <code>sprites.onOverlap()</code> &mdash; как <b>датчик на двери магазина</b>.
                        Когда два объекта &laquo;перекрываются&raquo; &mdash; срабатывает код.
                        Мы говорим: &laquo;когда Игрок касается Еды &mdash; сделай вот это&raquo;.
                    </p>
                </div>

                <div class="code-block">
<span class="cm">// Кот поймал рыбку!</span><br>
<span class="ev">sprites.onOverlap</span>(<br>
&nbsp;&nbsp;SpriteKind.Player,<br>
&nbsp;&nbsp;SpriteKind.Food,<br>
&nbsp;&nbsp;<span class="kw">function</span> (sprite, otherSprite) {<br>
&nbsp;&nbsp;&nbsp;&nbsp;otherSprite.destroy(effects.hearts, <span class="num">200</span>)<br>
&nbsp;&nbsp;&nbsp;&nbsp;info.changeScoreBy(<span class="num">1</span>)<br>
})
                </div>

                <div class="key-point">
                    <strong>Построчно:</strong><br>
                    &bull; <b>SpriteKind.Player</b> &mdash; первый участник столкновения (кот)<br>
                    &bull; <b>SpriteKind.Food</b> &mdash; второй (рыбка)<br>
                    &bull; <b>otherSprite.destroy(effects.hearts, 200)</b> &mdash; рыбка исчезает с сердечками<br>
                    &bull; <b>info.changeScoreBy(1)</b> &mdash; +1 очко!
                </div>

                <p>Запусти, лови рыбок &mdash; счёт должен расти!</p>
                <button class="btn-step" onclick="markDone(5)">Готово!</button>

                <div class="gif-break">
                    <img src="https://media.giphy.com/media/13HgwGsXF0aiGY/giphy.gif" alt="Ригби" loading="lazy">
                    <span class="gif-caption">Ригби одобряет твой прогресс!</span>
                </div>
            </div>
        </div>

        <!-- ═══════════════════════════════════════════
             ШАГ 6: КАКТУСЫ-ОПАСНОСТЬ
             ═══════════════════════════════════════════ -->
        <div class="step-card" data-step="6">
            <div class="step-header" onclick="toggleStep(this)">
                <span class="step-num">6</span>
                <span class="step-title">Опасность: падающие кактусы</span>
                <span class="step-time">~7 мин</span>
            </div>
            <div class="step-body">
                <p>
                    Чтобы игра была интересной, нужна <b>опасность</b>!
                    Каждые 3 секунды падает кактус &mdash; его нужно <b>избегать</b>.
                </p>

                <div class="analogy">
                    <div class="analogy-label">Аналогия: хорошее и плохое</div>
                    <p>
                        В игре есть <b>два типа</b> падающих предметов:<br>
                        &bull; Рыбка (<code>SpriteKind.Food</code>) &mdash; <b>хорошо</b>, лови!<br>
                        &bull; Кактус (<code>SpriteKind.Enemy</code>) &mdash; <b>плохо</b>, избегай!<br>
                        Тип (Kind) &mdash; как <b>бейджик</b> на одежде. По нему компьютер
                        понимает, как реагировать на столкновение.
                    </p>
                </div>

                <div class="sprite-block">
                    <span class="sprite-label">Спрайт кактуса (копируй):</span>
. . . . 7 7 . . . .
. . . 7 7 7 7 . . .
. 7 . 7 7 7 7 . 7 .
7 7 7 7 7 7 7 7 7 7
7 7 7 7 7 7 7 7 7 7
. 7 7 7 7 7 7 7 7 .
. . 7 7 7 7 7 7 . .
. . . . 7 7 . . . .
. . . . 7 7 . . . .
. . . . e e . . . .
                </div>

                <div class="code-block">
<span class="cm">// Кактус падает каждые 3 сек</span><br>
<span class="ev">game.onUpdateInterval</span>(<span class="num">3000</span>, <span class="kw">function</span> () {<br>
&nbsp;&nbsp;<span class="kw">let</span> cactus = sprites.create(img<span class="str">`</span><br>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="cm">... вставь спрайт кактуса ...</span><br>
&nbsp;&nbsp;<span class="str">`</span>, SpriteKind.Enemy)<br>
<br>
&nbsp;&nbsp;cactus.setPosition(randint(<span class="num">10</span>, <span class="num">150</span>), <span class="num">0</span>)<br>
&nbsp;&nbsp;cactus.setVelocity(<span class="num">0</span>, <span class="num">35</span>)<br>
&nbsp;&nbsp;cactus.setFlag(SpriteFlag.AutoDestroy, <span class="kw">true</span>)<br>
})
                </div>

                <p>Теперь добавим потерю жизни при столкновении:</p>

                <div class="code-block">
<span class="cm">// Кот врезался в кактус!</span><br>
<span class="ev">sprites.onOverlap</span>(<br>
&nbsp;&nbsp;SpriteKind.Player,<br>
&nbsp;&nbsp;SpriteKind.Enemy,<br>
&nbsp;&nbsp;<span class="kw">function</span> (sprite, otherSprite) {<br>
&nbsp;&nbsp;&nbsp;&nbsp;otherSprite.destroy(effects.disintegrate, <span class="num">200</span>)<br>
&nbsp;&nbsp;&nbsp;&nbsp;info.changeLifeBy(<span class="num">-1</span>)<br>
&nbsp;&nbsp;&nbsp;&nbsp;scene.cameraShake(<span class="num">2</span>, <span class="num">200</span>)<br>
})
                </div>

                <div class="key-point">
                    <strong>Разбираем:</strong><br>
                    &bull; <b>SpriteKind.Enemy</b> &mdash; тип &laquo;враг&raquo; (бейджик кактуса)<br>
                    &bull; <b>info.changeLifeBy(-1)</b> &mdash; минус 1 жизнь. Заметь: <b>-1</b>, а не <b>1</b>!<br>
                    &bull; <b>scene.cameraShake(2, 200)</b> &mdash; лёгкая тряска экрана (ой, больно!)
                </div>

                <p>Запусти &mdash; теперь нужно <b>ловить рыбу</b> и <b>уворачиваться от кактусов</b>!</p>
                <button class="btn-step" onclick="markDone(6)">Готово!</button>

                <div class="gif-break">
                    <img src="https://media.giphy.com/media/12XDYvMJNcmLgQ/giphy.gif" alt="шокированный кот" loading="lazy">
                    <span class="gif-caption">Кот когда врезался в кактус</span>
                </div>
            </div>
        </div>

        <!-- ═══════════════════════════════════════════
             ШАГ 7: ТАЙМЕР И ПОБЕДА
             ═══════════════════════════════════════════ -->
        <div class="step-card" data-step="7">
            <div class="step-header" onclick="toggleStep(this)">
                <span class="step-num">7</span>
                <span class="step-title">Таймер: продержись 45 секунд!</span>
                <span class="step-time">~5 мин</span>
            </div>
            <div class="step-body">
                <p>
                    Добавим обратный отсчёт. Продержался 45 секунд &mdash; <b>победа</b>!
                    Потерял все жизни &mdash; <b>проиграл</b>.
                </p>

                <div class="analogy">
                    <div class="analogy-label">Аналогия: урок физкультуры</div>
                    <p>
                        Как на физре: учитель говорит &laquo;продержитесь на турнике 30 секунд&raquo;.
                        Если продержался &mdash; пятёрка! Упал &mdash; попробуй ещё раз.
                        Наш таймер &mdash; то же самое, только для кота.
                    </p>
                </div>

                <div class="code-block">
<span class="cm">// Таймер на 45 секунд</span><br>
info.startCountdown(<span class="num">45</span>)<br>
<br>
<span class="cm">// Время вышло — победа!</span><br>
<span class="ev">info.onCountdownEnd</span>(<span class="kw">function</span> () {<br>
&nbsp;&nbsp;game.over(<span class="kw">true</span>, effects.confetti)<br>
})
                </div>

                <div class="key-point">
                    <strong>Что тут:</strong><br>
                    &bull; <b>info.startCountdown(45)</b> &mdash; обратный отсчёт 45 сек<br>
                    &bull; <b>game.over(true)</b> &mdash; <b>true</b> = ты выиграл! Конфетти!<br>
                    &bull; Если жизни кончатся раньше &mdash; MakeCode сам покажет Game Over
                </div>

                <div class="tip-box">
                    <strong>Совет:</strong> Поменяй <b>45</b> на <b>20</b> чтобы быстро проверить,
                    работает ли экран победы. Потом верни 45.
                </div>

                <button class="btn-step" onclick="markDone(7)">Готово!</button>
            </div>
        </div>

        <!-- ═══════════════════════════════════════════
             ШАГ 8: УСКОРЕНИЕ
             ═══════════════════════════════════════════ -->
        <div class="step-card" data-step="8">
            <div class="step-header" onclick="toggleStep(this)">
                <span class="step-num">8</span>
                <span class="step-title">Финальный штрих: ускорение</span>
                <span class="step-time">~5 мин</span>
            </div>
            <div class="step-body">
                <p>
                    Через 15 секунд сделаем игру <b>сложнее</b> &mdash; кактусы
                    начнут падать быстрее и чаще!
                </p>

                <div class="analogy">
                    <div class="analogy-label">Аналогия: переменная-выключатель</div>
                    <p>
                        <code>let fast = false</code> &mdash; как <b>выключатель света</b>.
                        Сначала он выключен (<b>false</b>). Через 15 секунд мы его включаем
                        (<b>true</b>). И дальше код проверяет: &laquo;свет включён? Если да &mdash;
                        делай быстрых врагов&raquo;.
                    </p>
                </div>

                <div class="code-block">
<span class="cm">// Переменная-выключатель</span><br>
<span class="kw">let</span> fast = <span class="kw">false</span><br>
<br>
<span class="cm">// Через 15 сек — включаем!</span><br>
<span class="ev">game.onUpdateInterval</span>(<span class="num">15000</span>, <span class="kw">function</span> () {<br>
&nbsp;&nbsp;fast = <span class="kw">true</span><br>
})<br>
<br>
<span class="cm">// Быстрые кактусы (если включено)</span><br>
<span class="ev">game.onUpdateInterval</span>(<span class="num">1500</span>, <span class="kw">function</span> () {<br>
&nbsp;&nbsp;<span class="kw">if</span> (fast) {<br>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kw">let</span> fastCactus = sprites.create(img<span class="str">`</span><br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="cm">... спрайт кактуса (тот же) ...</span><br>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="str">`</span>, SpriteKind.Enemy)<br>
<br>
&nbsp;&nbsp;&nbsp;&nbsp;fastCactus.setPosition(randint(<span class="num">10</span>, <span class="num">150</span>), <span class="num">0</span>)<br>
&nbsp;&nbsp;&nbsp;&nbsp;fastCactus.setVelocity(randint(<span class="num">-15</span>, <span class="num">15</span>), <span class="num">60</span>)<br>
&nbsp;&nbsp;}<br>
&nbsp;&nbsp;fastCactus.setFlag(SpriteFlag.AutoDestroy, <span class="kw">true</span>)<br>
})
                </div>

                <div class="key-point">
                    <strong>Разбираем:</strong><br>
                    &bull; <b>let fast = false</b> &mdash; выключатель, сначала выкл<br>
                    &bull; <b>15000 мс = 15 сек</b> &mdash; потом включаем<br>
                    &bull; <b>if (fast)</b> &mdash; &laquo;если включено, тогда...&raquo;<br>
                    &bull; <b>Velocity(randint(-15, 15), 60)</b> &mdash; кактусы быстрее (60 вместо 35) и летят вбок!
                </div>

                <button class="btn-step" onclick="markDone(8)">Игра готова!</button>

                <div class="gif-break">
                    <img src="https://media.giphy.com/media/mlvseq9yvZhba/giphy.gif" alt="танцующий кот" loading="lazy">
                    <span class="gif-caption">Ты сделал игру! Танцуем!</span>
                </div>
            </div>
        </div>

        <div class="divider"></div>

        <!-- ═══════════════════════════════════════════
             КАК МЕНЯТЬ СПРАЙТЫ
             ═══════════════════════════════════════════ -->
        <div class="step-card" style="border-color: rgba(251, 191, 36, 0.35);">
            <div class="step-header" onclick="toggleStep(this)">
                <span class="step-num" style="background: linear-gradient(135deg, #d97706, #fbbf24);">?</span>
                <span class="step-title">Как нарисовать своих персонажей</span>
            </div>
            <div class="step-body">
                <div class="key-point">
                    <strong>Способ 1: Графический редактор (рекомендуем!)</strong><br>
                    1. Найди строку с <code>img`...`</code> в коде<br>
                    2. Кликни на <b>серую иконку</b> слева от <code>img</code><br>
                    3. Откроется <b>редактор</b> &mdash; рисуй мышкой как в Paint!<br>
                    4. Закрой &mdash; код обновится сам
                </div>

                <div class="key-point">
                    <strong>Способ 2: Буквами (для продвинутых)</strong><br>
                    <code>.</code> = пусто &nbsp;
                    <code>1</code> = белый &nbsp;
                    <code>2</code> = красный &nbsp;
                    <code>3</code> = розовый &nbsp;
                    <code>4</code> = жёлтый<br>
                    <code>5</code> = золотой &nbsp;
                    <code>6</code> = бирюзовый &nbsp;
                    <code>7</code> = зелёный &nbsp;
                    <code>8</code> = синеватый<br>
                    <code>9</code> = оранжевый &nbsp;
                    <code>a</code> = салатовый &nbsp;
                    <code>b</code> = синий &nbsp;
                    <code>c</code> = голубой<br>
                    <code>d</code> = фиолетовый &nbsp;
                    <code>e</code> = сиреневый &nbsp;
                    <code>f</code> = серый
                </div>
            </div>
        </div>

        <!-- ═══════════════════════════════════════════
             БОНУС: ИДЕИ
             ═══════════════════════════════════════════ -->
        <div class="step-card" style="border-color: rgba(52, 211, 153, 0.3);">
            <div class="step-header">
                <span class="step-num" style="background: linear-gradient(135deg, #059669, #34d399);">+</span>
                <span class="step-title" style="color: #6ee7b7;">Идеи для улучшения</span>
            </div>
            <div class="step-body">
                <p>Игра работает! Попробуй добавить:</p>
                <ul class="checklist">
                    <li><b>Молоко</b> &mdash; новый бонус с <code>SpriteKind.Food</code> который даёт +1 жизнь</li>
                    <li><b>Собака-враг</b> &mdash; двигается по низу экрана влево-вправо</li>
                    <li><b>Звуки</b> &mdash; <code>music.playTone(262, 100)</code> при ловле рыбки</li>
                    <li><b>Другой фон</b> &mdash; попробуй <code>scene.setBackgroundColor(9)</code> (оранж) или <code>15</code> (ночь)</li>
                </ul>
            </div>
        </div>

        <!-- ИТОГОВЫЙ КОД -->
        <div class="step-card" style="border-color: rgba(0, 212, 255, 0.3);">
            <div class="step-header" onclick="toggleFinalCode()" style="cursor:pointer;">
                <span class="step-num" style="background: linear-gradient(135deg, #0099ff, #00d4ff);">!</span>
                <span class="step-title" style="color: #7dd3fc;">Итоговый код (если запутался)</span>
            </div>
            <div class="step-body" id="finalCodeBlock" style="display:none;">
                <div class="warning-box">
                    <strong>Попробуй сначала сам!</strong> Открывай только если совсем застрял.
                </div>
                <div class="code-block" style="font-size: 0.82em;">
<span class="cm">// ===== ГОЛОДНЫЙ КОТ =====</span><br>
<br>
<span class="cm">// Фон и настройки</span><br>
scene.setBackgroundColor(<span class="num">7</span>)<br>
info.setLife(<span class="num">3</span>)<br>
info.setScore(<span class="num">0</span>)<br>
<br>
<span class="cm">// Кот</span><br>
<span class="kw">let</span> cat = sprites.create(img<span class="str">`<br>
&nbsp;&nbsp;. . . . . . . . . . . . . . . .<br>
&nbsp;&nbsp;. . . f f . . . . . . f f . . .<br>
&nbsp;&nbsp;. . f 9 9 f . . . . f 9 9 f . .<br>
&nbsp;&nbsp;. f 9 9 9 9 f f f f 9 9 9 9 f .<br>
&nbsp;&nbsp;. f 9 1 9 9 9 9 9 9 9 9 1 9 f .<br>
&nbsp;&nbsp;. f 9 9 9 9 9 9 9 9 9 9 9 9 f .<br>
&nbsp;&nbsp;. . f 9 9 f 9 9 9 9 f 9 9 f . .<br>
&nbsp;&nbsp;. . . f f 9 9 9 9 9 9 f f . . .<br>
&nbsp;&nbsp;. . . . f 9 9 9 9 9 9 f . . . .<br>
&nbsp;&nbsp;. . . . f 9 9 9 9 9 9 f . . . .<br>
&nbsp;&nbsp;. . . . . f 9 9 9 9 f . . . . .<br>
&nbsp;&nbsp;. . . . . . f f f f . . . . . .<br>
`</span>, SpriteKind.Player)<br>
cat.setPosition(<span class="num">80</span>, <span class="num">110</span>)<br>
cat.setStayInScreen(<span class="kw">true</span>)<br>
controller.moveSprite(cat, <span class="num">100</span>, <span class="num">0</span>)<br>
<br>
<span class="cm">// Рыбки</span><br>
<span class="ev">game.onUpdateInterval</span>(<span class="num">2000</span>, <span class="kw">function</span> () {<br>
&nbsp;&nbsp;<span class="kw">let</span> fish = sprites.create(img<span class="str">`<br>
&nbsp;&nbsp;&nbsp;&nbsp;. . . . . . . . . . . .<br>
&nbsp;&nbsp;&nbsp;&nbsp;. . . . b b b b . . . .<br>
&nbsp;&nbsp;&nbsp;&nbsp;. . . b c c c c b . . .<br>
&nbsp;&nbsp;&nbsp;&nbsp;. b b c c c c c c b . .<br>
&nbsp;&nbsp;&nbsp;&nbsp;b c c c c c 1 c c c b .<br>
&nbsp;&nbsp;&nbsp;&nbsp;. b b c c c c c c b . .<br>
&nbsp;&nbsp;&nbsp;&nbsp;. . . b c c c c b . . .<br>
&nbsp;&nbsp;&nbsp;&nbsp;. . . . b b b b . . . .<br>
&nbsp;&nbsp;&nbsp;&nbsp;. . . . . . . . . . . .<br>
&nbsp;&nbsp;`</span>, SpriteKind.Food)<br>
&nbsp;&nbsp;fish.setPosition(randint(<span class="num">10</span>, <span class="num">150</span>), <span class="num">0</span>)<br>
&nbsp;&nbsp;fish.setVelocity(<span class="num">0</span>, <span class="num">40</span>)<br>
&nbsp;&nbsp;fish.setFlag(SpriteFlag.AutoDestroy, <span class="kw">true</span>)<br>
})<br>
<br>
<span class="cm">// Ловим рыбку</span><br>
<span class="ev">sprites.onOverlap</span>(SpriteKind.Player, SpriteKind.Food,<br>
&nbsp;&nbsp;<span class="kw">function</span> (sprite, otherSprite) {<br>
&nbsp;&nbsp;&nbsp;&nbsp;otherSprite.destroy(effects.hearts, <span class="num">200</span>)<br>
&nbsp;&nbsp;&nbsp;&nbsp;info.changeScoreBy(<span class="num">1</span>)<br>
})<br>
<br>
<span class="cm">// Кактусы</span><br>
<span class="ev">game.onUpdateInterval</span>(<span class="num">3000</span>, <span class="kw">function</span> () {<br>
&nbsp;&nbsp;<span class="kw">let</span> cactus = sprites.create(img<span class="str">`<br>
&nbsp;&nbsp;&nbsp;&nbsp;. . . . 7 7 . . . .<br>
&nbsp;&nbsp;&nbsp;&nbsp;. . . 7 7 7 7 . . .<br>
&nbsp;&nbsp;&nbsp;&nbsp;. 7 . 7 7 7 7 . 7 .<br>
&nbsp;&nbsp;&nbsp;&nbsp;7 7 7 7 7 7 7 7 7 7<br>
&nbsp;&nbsp;&nbsp;&nbsp;7 7 7 7 7 7 7 7 7 7<br>
&nbsp;&nbsp;&nbsp;&nbsp;. 7 7 7 7 7 7 7 7 .<br>
&nbsp;&nbsp;&nbsp;&nbsp;. . 7 7 7 7 7 7 . .<br>
&nbsp;&nbsp;&nbsp;&nbsp;. . . . 7 7 . . . .<br>
&nbsp;&nbsp;&nbsp;&nbsp;. . . . 7 7 . . . .<br>
&nbsp;&nbsp;&nbsp;&nbsp;. . . . e e . . . .<br>
&nbsp;&nbsp;`</span>, SpriteKind.Enemy)<br>
&nbsp;&nbsp;cactus.setPosition(randint(<span class="num">10</span>, <span class="num">150</span>), <span class="num">0</span>)<br>
&nbsp;&nbsp;cactus.setVelocity(<span class="num">0</span>, <span class="num">35</span>)<br>
&nbsp;&nbsp;cactus.setFlag(SpriteFlag.AutoDestroy, <span class="kw">true</span>)<br>
})<br>
<br>
<span class="cm">// Кот врезался в кактус</span><br>
<span class="ev">sprites.onOverlap</span>(SpriteKind.Player, SpriteKind.Enemy,<br>
&nbsp;&nbsp;<span class="kw">function</span> (sprite, otherSprite) {<br>
&nbsp;&nbsp;&nbsp;&nbsp;otherSprite.destroy(effects.disintegrate, <span class="num">200</span>)<br>
&nbsp;&nbsp;&nbsp;&nbsp;info.changeLifeBy(<span class="num">-1</span>)<br>
&nbsp;&nbsp;&nbsp;&nbsp;scene.cameraShake(<span class="num">2</span>, <span class="num">200</span>)<br>
})<br>
<br>
<span class="cm">// Таймер</span><br>
info.startCountdown(<span class="num">45</span>)<br>
<span class="ev">info.onCountdownEnd</span>(<span class="kw">function</span> () {<br>
&nbsp;&nbsp;game.over(<span class="kw">true</span>, effects.confetti)<br>
})<br>
<br>
<span class="cm">// Ускорение</span><br>
<span class="kw">let</span> fast = <span class="kw">false</span><br>
<span class="ev">game.onUpdateInterval</span>(<span class="num">15000</span>, <span class="kw">function</span> () {<br>
&nbsp;&nbsp;fast = <span class="kw">true</span><br>
})<br>
<span class="ev">game.onUpdateInterval</span>(<span class="num">1500</span>, <span class="kw">function</span> () {<br>
&nbsp;&nbsp;<span class="kw">if</span> (fast) {<br>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kw">let</span> fastCactus = sprites.create(img<span class="str">`<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;. . . . 7 7 . . . .<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;. . . 7 7 7 7 . . .<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;. 7 . 7 7 7 7 . 7 .<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;7 7 7 7 7 7 7 7 7 7<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;7 7 7 7 7 7 7 7 7 7<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;. 7 7 7 7 7 7 7 7 .<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;. . 7 7 7 7 7 7 . .<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;. . . . 7 7 . . . .<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;. . . . 7 7 . . . .<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;. . . . e e . . . .<br>
&nbsp;&nbsp;&nbsp;&nbsp;`</span>, SpriteKind.Enemy)<br>
&nbsp;&nbsp;&nbsp;&nbsp;fastCactus.setPosition(randint(<span class="num">10</span>, <span class="num">150</span>), <span class="num">0</span>)<br>
&nbsp;&nbsp;&nbsp;&nbsp;fastCactus.setVelocity(randint(<span class="num">-15</span>, <span class="num">15</span>), <span class="num">60</span>)<br>
&nbsp;&nbsp;&nbsp;&nbsp;fastCactus.setFlag(SpriteFlag.AutoDestroy, <span class="kw">true</span>)<br>
&nbsp;&nbsp;}<br>
})
                </div>
            </div>
        </div>

        <div style="text-align:center; margin-top:22px;">
            <a class="btn-arcade" href="https://arcade.makecode.com/" target="_blank" rel="noopener">
                Открыть MakeCode Arcade &rarr;
            </a>
        </div>

        <div class="footer">
            <p>Ты создал аркадную игру! Котик сыт и доволен. Сохрани проект!</p>
        </div>
    </div>

    <!-- Three.js + Vanta BIRDS -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/three.js/r128/three.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/vanta@latest/dist/vanta.birds.min.js"></script>

    <script>
    /* ── Vanta BIRDS background ── */
    var vantaEffect = null;
    function initVanta() {
        if (vantaEffect) return;
        try {
            vantaEffect = VANTA.BIRDS({
                el: '#vanta-bg',
                mouseControls: false,
                touchControls: false,
                minHeight: 200,
                minWidth: 200,
                scale: 1,
                scaleMobile: 1,
                backgroundColor: 0x1a0f08,
                color1: 0xf59e0b,
                color2: 0xf97316,
                birdSize: 1.2,
                wingSpan: 20,
                speedLimit: 3,
                separation: 30,
                alignment: 40,
                cohesion: 30,
                quantity: 3
            });
        } catch(e) {}
    }
    function toggleBg() {
        if (vantaEffect) { vantaEffect.destroy(); vantaEffect = null; }
        else { initVanta(); }
    }
    initVanta();

    /* ── Step progress ── */
    var completedSteps = JSON.parse(localStorage.getItem('hungryCatProgress') || '[]');

    function updateProgress() {
        var count = completedSteps.length;
        document.getElementById('progressCount').textContent = count;
        document.getElementById('progressFill').style.width = (count / 8 * 100) + '%';
        completedSteps.forEach(function(s) {
            var card = document.querySelector('[data-step="' + s + '"]');
            if (card) {
                var badge = card.querySelector('.step-num');
                if (badge) badge.classList.add('done');
            }
        });
    }

    function markDone(stepNum) {
        if (completedSteps.indexOf(stepNum) === -1) {
            completedSteps.push(stepNum);
            localStorage.setItem('hungryCatProgress', JSON.stringify(completedSteps));
        }
        updateProgress();
        var next = document.querySelector('[data-step="' + (stepNum + 1) + '"]');
        if (next) next.scrollIntoView({ behavior: 'smooth', block: 'start' });
    }

    function toggleStep(header) {
        var body = header.nextElementSibling;
        if (body && body.classList.contains('step-body')) {
            body.style.display = body.style.display === 'none' ? 'block' : '';
        }
    }

    function toggleFinalCode() {
        var block = document.getElementById('finalCodeBlock');
        block.style.display = block.style.display === 'none' ? 'block' : 'none';
    }

    updateProgress();

    /* ── Disable copy on code blocks (but NOT sprite blocks) ── */
    document.addEventListener('copy', function(e) {
        var sel = window.getSelection();
        if (sel && sel.anchorNode) {
            var el = sel.anchorNode.parentElement;
            while (el) {
                if (el.classList && el.classList.contains('sprite-block')) return;
                if (el.classList && el.classList.contains('code-block')) {
                    e.preventDefault();
                    return;
                }
                el = el.parentElement;
            }
        }
    });
    document.querySelectorAll('.code-block').forEach(function(block) {
        block.addEventListener('dragstart', function(e) { e.preventDefault(); });
    });
    </script>
</body>
</html>
