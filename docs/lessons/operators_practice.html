<!doctype html>
<html lang="ru">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>JavaScript ‚Äî –û–ø–µ—Ä–∞—Ç–æ—Ä—ã –∏ –ø–æ–¥–≤–æ—Ö–∏</title>
  <style>
    :root{
      --bg1:#eef2ff;
      --bg2:#e9f7ff;
      --card:#ffffffcc;
      --stroke:rgba(148,163,184,.35);
      --text:#0f172a;
      --muted:#475569;
      --shadow: 0 18px 45px rgba(15,23,42,.12);
      --shadow2: 0 10px 30px rgba(15,23,42,.10);
      --radius: 22px;
      --accent:#2563eb;
      --ok:#16a34a;
      --warn:#f59e0b;
      --bad:#ef4444;
      --mono: ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas, "Liberation Mono", "Courier New", monospace;
      --sans: system-ui, -apple-system, Segoe UI, Roboto, Arial, sans-serif;
    }

    *{ box-sizing:border-box; }
    body{
      margin:0;
      font-family: var(--sans);
      color: var(--text);
      background:
        radial-gradient(1000px 500px at 12% 0%, #c7d2fe 0%, transparent 55%),
        radial-gradient(900px 480px at 88% 10%, #bae6fd 0%, transparent 55%),
        radial-gradient(800px 500px at 20% 85%, #ddd6fe 0%, transparent 55%),
        linear-gradient(180deg, var(--bg2), var(--bg1));
      min-height: 100vh;
    }

    .wrap{ width:min(1180px, 92vw); margin: 28px auto 70px; }

    .hero{
      position: relative;
      padding: 26px 26px 22px;
      border-radius: calc(var(--radius) + 10px);
      background: linear-gradient(180deg, rgba(255,255,255,.88), rgba(255,255,255,.65));
      border: 1px solid var(--stroke);
      box-shadow: var(--shadow);
      overflow:hidden;
    }
    .hero h1{ margin:0 0 8px; font-size: clamp(34px, 4vw, 56px); letter-spacing: .2px; }
    .hero p{ margin:0; font-size: clamp(16px, 2vw, 22px); color: var(--muted); }

    /* –¥–µ–∫–æ—Ä–∞—Ç–∏–≤–∫–∞ –∫–∞–∫ –≤ ‚Äú–æ–±—ã—á–Ω–æ–º –≤–∞—à–µ–º‚Äù —Å—Ç–∏–ª–µ */
    .hero svg{
      position:absolute;
      right:-90px;
      top:-30px;
      width:min(720px, 65vw);
      opacity:.95;
      pointer-events:none;
      filter: drop-shadow(0 18px 30px rgba(2,6,23,.12));
    }

    h2{ margin: 18px 0 10px; font-size: clamp(22px, 2.5vw, 34px); }
    .sub{ margin:0 0 12px; color: var(--muted); font-size: 16px; }

    .grid{
      margin-top: 18px;
      display:grid;
      grid-template-columns: 1fr;
      gap: 14px;
    }
    @media (min-width: 980px){
      .grid{ grid-template-columns: 1.25fr .75fr; }
    }

    .card{
      background: var(--card);
      border: 1px solid var(--stroke);
      border-radius: var(--radius);
      box-shadow: var(--shadow2);
      padding: 18px;
      backdrop-filter: blur(8px);
    }

    .row{ display:flex; gap: 10px; flex-wrap: wrap; align-items:center; }

    .pill{
      display:inline-flex;
      align-items:center;
      gap:8px;
      padding: 7px 12px;
      border-radius: 999px;
      border: 1px solid rgba(148,163,184,.45);
      background: rgba(255,255,255,.7);
      color: var(--muted);
      font-size: 14px;
    }
    .kbd{
      font-family: var(--mono);
      padding: 2px 7px;
      border-radius: 10px;
      border:1px solid rgba(148,163,184,.55);
      background: rgba(255,255,255,.75);
      color: var(--text);
      font-size: 13px;
    }

    .exprList{ display:grid; gap: 10px; margin-top: 10px; }
    .expr{
      padding: 12px;
      border-radius: 18px;
      border:1px solid rgba(148,163,184,.35);
      background: rgba(255,255,255,.8);
      box-shadow: 0 10px 22px rgba(15,23,42,.06);
      display:grid;
      gap:10px;
    }
    .exprTop{
      display:flex;
      justify-content: space-between;
      align-items: center;
      gap:10px;
      flex-wrap: wrap;
    }
    .code{
      font-family: var(--mono);
      font-size: 15px;
      padding: 8px 10px;
      border-radius: 14px;
      border: 1px solid rgba(148,163,184,.40);
      background: rgba(241,245,249,.85);
      color: #0b1220;
      user-select: all;
    }

    input, select, textarea{
      padding: 12px 12px;
      border-radius: 14px;
      border: 1px solid rgba(148,163,184,.55);
      background: rgba(255,255,255,.9);
      color: var(--text);
      font-size: 16px;
      outline:none;
    }
    input{ min-width: 170px; }

    textarea{
      width:100%;
      min-height: 160px;
      font-family: var(--mono);
      font-size: 14px;
      line-height: 1.35;
      resize: vertical;
    }

    button{
      padding: 12px 14px;
      border-radius: 14px;
      border: 1px solid rgba(37,99,235,.25);
      background: linear-gradient(180deg, rgba(37,99,235,.95), rgba(29,78,216,.95));
      color: white;
      font-weight: 800;
      cursor:pointer;
      font-size: 15px;
      box-shadow: 0 10px 22px rgba(37,99,235,.18);
    }
    button:active{ transform: translateY(1px); }

    .btn2{
      border: 1px solid rgba(148,163,184,.55);
      background: rgba(255,255,255,.9);
      color: var(--text);
      box-shadow: 0 10px 22px rgba(15,23,42,.06);
      font-weight: 800;
    }

    .out{
      padding: 10px 12px;
      border-radius: 14px;
      border:1px solid rgba(148,163,184,.35);
      background: rgba(255,255,255,.9);
      min-height: 46px;
      display:flex;
      align-items:center;
      gap:10px;
      color: var(--text);
      font-size: 16px;
    }
    .dot{ width:12px; height:12px; border-radius:999px; display:inline-block; }
    .dot.ok{ background: var(--ok); }
    .dot.warn{ background: var(--warn); }
    .dot.bad{ background: var(--bad); }

    details{
      border-radius: 18px;
      border:1px solid rgba(148,163,184,.35);
      background: rgba(255,255,255,.78);
      padding: 10px 12px;
      margin-top: 10px;
    }
    summary{ cursor:pointer; font-weight: 900; color: var(--text); }
    .hint{ color: var(--muted); margin: 0; }

    .img-slot{
      margin-top: 14px;
      border-radius: 18px;
      border:1px dashed rgba(148,163,184,.55);
      background: rgba(255,255,255,.65);
      padding: 12px;
      display:grid;
      gap:10px;
    }
    .img-slot img{
      max-width: 100%;
      border-radius: 16px;
      border:1px solid rgba(148,163,184,.35);
      display:block;
    }

    .footer{
      margin-top: 16px;
      padding: 14px 16px;
      border-radius: var(--radius);
      border:1px solid rgba(148,163,184,.35);
      background: rgba(255,255,255,.65);
      color: var(--muted);
    }
    .hero{ position:relative; }
.heroBg{
  position:absolute;
  inset:0;
  pointer-events:none;
  z-index:0;
  opacity:.95;
}
.heroContent{
  position:relative;
  z-index:1;
}

  </style>
</head>

<body>
  <div class="wrap">
    <section class="hero">
  <!-- –Ω–∞—Å—Ç–æ—è—â–∏–π —Ñ–æ–Ω Vanta -->
  <div class="heroBg" id="heroBg" aria-hidden="true"></div>

  <!-- –∫–æ–Ω—Ç–µ–Ω—Ç –ø–æ–≤–µ—Ä—Ö -->
  <div class="heroContent">
    <h1>JavaScript</h1>
    <p>–û–ø–µ—Ä–∞—Ç–æ—Ä—ã + –ø—Ä–µ–æ–±—Ä–∞–∑–æ–≤–∞–Ω–∏–µ —Ç–∏–ø–æ–≤. –°–Ω–∞—á–∞–ª–∞ ‚Äú–ø–æ–¥–≤–æ—Ö–∏‚Äù, –ø–æ—Ç–æ–º 2 —Å–ª–æ–∂–Ω—ã–µ –ø—Ä–∞–∫—Ç–∏–∫–∏ —Å –∞–≤—Ç–æ—Ç–µ—Å—Ç–∞–º–∏. AI ‚Äî –ø–æ –∂–µ–ª–∞–Ω–∏—é.</p>
  </div>
</section>


    <div class="grid">
      <!-- –õ–ï–í–û: –ü–û–î–í–û–•–ò -->
      <section class="card">
        <h2>1) –ü—Ä–∏–º–µ—Ä—ã-–ø–æ–¥–≤–æ—Ö–∏ (—É–≥–∞–¥–∞–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç)</h2>
        <p class="sub">
          –í –∫–∞–∂–¥–æ–º –ø—Ä–∏–º–µ—Ä–µ: –Ω–∞–ø–∏—à–∏ –æ—Ç–≤–µ—Ç ‚Üí <b>–ü—Ä–æ–≤–µ—Ä–∏—Ç—å</b>. –ï—Å–ª–∏ –∑–∞—Å—Ç—Ä—è–ª ‚Äî <b>–ü–æ–¥—Å–∫–∞–∑–∫–∞</b>.
          <span class="pill"><span class="kbd">typeof</span> –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç —Ç–∏–ø</span>
        </p>

        <div class="exprList" id="exprList"></div>

        <details>
          <summary>–ú–∏–Ω–∏-—à–ø–∞—Ä–≥–∞–ª–∫–∞ (5 –ø—Ä–∞–≤–∏–ª)</summary>
          <p class="hint">
            1) <span class="kbd">prompt()</span> –∏ <span class="kbd">input.value</span> ‚Üí <b>—Å—Ç—Ä–æ–∫–∞</b><br/>
            2) <span class="kbd">+</span> —Å–æ —Å—Ç—Ä–æ–∫–æ–π ‚Üí <b>—Å–∫–ª–µ–π–∫–∞</b><br/>
            3) <span class="kbd">- * /</span> ‚Üí –ø—ã—Ç–∞—é—Ç—Å—è —Å–¥–µ–ª–∞—Ç—å <b>—á–∏—Å–ª–æ</b><br/>
            4) <span class="kbd">null</span> –≤ —á–∏—Å–ª–∞—Ö —á–∞—Å—Ç–æ —Å—Ç–∞–Ω–æ–≤–∏—Ç—Å—è <span class="kbd">0</span><br/>
            5) <span class="kbd">undefined</span> –≤ —á–∏—Å–ª–∞—Ö ‚Üí <span class="kbd">NaN</span>
          </p>
        </details>

        <h2 style="margin-top:18px;">–ú–µ—Å—Ç–æ –¥–ª—è –∫–∞—Ä—Ç–∏–Ω–∫–∏</h2>
        <div class="img-slot">
          <div class="hint">–ï—Å–ª–∏ –¥–æ—Å—Ç—É–ø –∫ –º–æ–∏–º –∫–∞—Ä—Ç–∏–Ω–∫–∞–º –ø—Ä–æ–ø–∞–¥—ë—Ç ‚Äî –≤—Å—Ç–∞–≤–∏—à—å —Å–≤–æ—é: <span class="kbd">img/your-image.png</span></div>
          <img src="img/your-image.png" alt="–¢—É—Ç –±—É–¥–µ—Ç –≤–∞—à–∞ –∫–∞—Ä—Ç–∏–Ω–∫–∞">
        </div>
      </section>

      <!-- –ü–†–ê–í–û: –ü–†–ê–ö–¢–ò–ö–ê + AI -->
      <aside class="card">
        <h2>2) –ü—Ä–∞–∫—Ç–∏–∫–∞</h2>
        <p class="sub">2 —Å–ª–æ–∂–Ω—ã—Ö –∑–∞–¥–∞–Ω–∏—è, –∞–≤—Ç–æ—Ç–µ—Å—Ç—ã. AI ‚Äî —Ç–æ–ª—å–∫–æ –∫–∞–∫ –ø–æ–º–æ—â–Ω–∏–∫ (–ø—Ä–æ–º–ø—Ç —Å–∫—Ä—ã—Ç –∏ –Ω–µ —Ä–µ–¥–∞–∫—Ç–∏—Ä—É–µ—Ç—Å—è).</p>

        <details open>
          <summary>–ó–∞–¥–∞–Ω–∏–µ ‚Ññ1: —Å—Ç—Ä–æ–∫–∞ ‚ÄúA¬±B‚Äù (–ø–µ—Ä–≤–æ–µ –¥–µ–π—Å—Ç–≤–∏–µ ‚Äî –ø–ª—é—Å –∏–ª–∏ –º–∏–Ω—É—Å)</summary>
          <p class="hint" style="margin:10px 0 0;">
            –î–∞–Ω–æ <b>expr</b> ‚Äî —Å—Ç—Ä–æ–∫–∞ –≤–∏–¥–∞ <span class="kbd">"12-5"</span> –∏–ª–∏ <span class="kbd">"12+5"</span> (–º–æ–≥—É—Ç –±—ã—Ç—å –ø—Ä–æ–±–µ–ª—ã).
            –í–µ—Ä–Ω–∏ —á–∏—Å–ª–æ-—Ä–µ–∑—É–ª—å—Ç–∞—Ç. –ï—Å–ª–∏ –∑–Ω–∞–∫ <b>–º–∏–Ω—É—Å</b> ‚Äî –≤—ã—á–∏—Ç–∞–π, –µ—Å–ª–∏ <b>–ø–ª—é—Å</b> ‚Äî —Å–∫–ª–∞–¥—ã–≤–∞–π.
          </p>

          <textarea id="codeSolve">function solve(expr) {
  // 1) —É–±—Ä–∞—Ç—å –ø—Ä–æ–±–µ–ª—ã: expr = expr.replaceAll(" ", "")
  // 2) –Ω–∞–π—Ç–∏ –∏–Ω–¥–µ–∫—Å "+" –∏–ª–∏ "-"
  // 3) –≤–∑—è—Ç—å –ª–µ–≤—É—é/–ø—Ä–∞–≤—É—é —á–∞—Å—Ç—å —á–µ—Ä–µ–∑ slice, —Å–¥–µ–ª–∞—Ç—å Number(...)
  // 4) if (op === "-") return left - right; else return left + right;
}</textarea>

          <div class="row" style="margin-top:10px;">
            <button id="runSolveTests">–ü—Ä–æ–≤–µ—Ä–∏—Ç—å</button>
<button class="btn2" id="solveHint1">–ü–æ–¥—Å–∫–∞–∑–∫–∞ 1</button>
<button class="btn2" id="solveHint2">–ü–æ–¥—Å–∫–∞–∑–∫–∞ 2</button>
<button class="btn2" id="solveAnswer">–û—Ç–≤–µ—Ç (—É—á–∏—Ç–µ–ª—å)</button>

          </div>

          <div class="out" id="solveOut">–†–µ–∑—É–ª—å—Ç–∞—Ç —Ç–µ—Å—Ç–æ–≤: ‚Äî</div>
        </details>

        <details>
          <summary>–ó–∞–¥–∞–Ω–∏–µ ‚Ññ2: ‚Äú–±–µ—Å–∫–æ–Ω–µ—á–Ω–∞—è‚Äù –ø—Ä–æ–≤–µ—Ä–∫–∞ if / else if / else + %</summary>
          <p class="hint" style="margin:10px 0 0;">
            –ù–∞–ø–∏—à–∏ —Ñ—É–Ω–∫—Ü–∏—é <b>analyze(n)</b> (n ‚Äî —á–∏—Å–ª–æ). –í–æ–∑–≤—Ä–∞—â–∞–π <b>–æ–¥–Ω—É</b> —Å—Ç—Ä–æ–∫—É:
            <br>‚Ä¢ –µ—Å–ª–∏ n –Ω–µ —á–∏—Å–ª–æ ‚Üí <span class="kbd">"not a number"</span>
            <br>‚Ä¢ –µ—Å–ª–∏ n &lt; 0 ‚Üí <span class="kbd">"negative"</span>
            <br>‚Ä¢ –µ—Å–ª–∏ n === 0 ‚Üí <span class="kbd">"zero"</span>
            <br>‚Ä¢ –µ—Å–ª–∏ n –∫—Ä–∞—Ç–Ω–æ 2 –∏ 3 ‚Üí <span class="kbd">"divisible by 2 and 3"</span>
            <br>‚Ä¢ –µ—Å–ª–∏ n —á—ë—Ç–Ω–æ–µ ‚Üí <span class="kbd">"even"</span>
            <br>‚Ä¢ –µ—Å–ª–∏ n –∫—Ä–∞—Ç–Ω–æ 3 ‚Üí <span class="kbd">"divisible by 3"</span>
            <br>‚Ä¢ –∏–Ω–∞—á–µ ‚Üí <span class="kbd">"odd"</span>
          </p>
<details>
  <summary>–ü–æ—Ö–æ–∂–∏–π –ø—Ä–∏–º–µ—Ä (—Å–¥–µ–ª–∞–π —Ç–∞–∫ –∂–µ)</summary>
  <p class="hint" style="margin:10px 0 0;">
    –ü—Ä–∏–º–µ—Ä: <span class="kbd">"  12 - 5  "</span><br>
    1) —É–±–∏—Ä–∞–µ–º –ø—Ä–æ–±–µ–ª—ã ‚Üí <span class="kbd">"12-5"</span><br>
    2) –∑–Ω–∞–∫: <span class="kbd">-</span><br>
    3) left=12, right=5 ‚Üí –æ—Ç–≤–µ—Ç 7
  </p>
</details>
          <textarea id="codeAnalyze">function analyze(n) {
  // –ø–æ–¥—Å–∫–∞–∑–∫–∞: Number.isFinite(n), if/else if/else, –æ—Å—Ç–∞—Ç–æ–∫ %
}</textarea>

          <div class="row" style="margin-top:10px;">
            <button id="runAnalyzeTests">–ü—Ä–æ–≤–µ—Ä–∏—Ç—å</button>
            <button class="btn2" id="fillAnalyzeHint">–í—Å—Ç–∞–≤–∏—Ç—å —à–∞–±–ª–æ–Ω</button>
          </div>

          <div class="out" id="analyzeOut">–†–µ–∑—É–ª—å—Ç–∞—Ç —Ç–µ—Å—Ç–æ–≤: ‚Äî</div>
        </details>

        <details id="aiBox">
          <summary>ü§ñ AI-–ø–æ–¥—Å–∫–∞–∑–∫–∞ (WebGPU, –ª–æ–∫–∞–ª—å–Ω–æ –≤ –±—Ä–∞—É–∑–µ—Ä–µ)</summary>
          <p class="hint" style="margin:10px 0 0;">
            –†–∞–±–æ—Ç–∞–µ—Ç, –µ—Å–ª–∏ —Å—Ç—Ä–∞–Ω–∏—Ü—É –æ—Ç–∫—Ä—ã—Ç—å —á–µ—Ä–µ–∑ <b>http/https</b> (GitHub Pages / Live Server), –∏ –≤ –±—Ä–∞—É–∑–µ—Ä–µ –µ—Å—Ç—å WebGPU.
            –ü–µ—Ä–≤—ã–π —Ä–∞–∑ –º–æ–¥–µ–ª—å —Å–∫–∞—á–∏–≤–∞–µ—Ç—Å—è, –ø–æ—Ç–æ–º –±–µ—Ä—ë—Ç—Å—è –∏–∑ –∫—ç—à–∞.
          </p>

          <div class="row" style="margin-top:10px;">
            <select id="aiModel">
              <option value="Llama-3.2-1B-Instruct-q4f16_1-MLC">Llama 3.2 1B (–±—ã—Å—Ç—Ä–µ–µ)</option>
              <option value="Llama-3.2-3B-Instruct-q4f16_1-MLC">Llama 3.2 3B (—É–º–Ω–µ–µ)</option>
            </select>
            <button id="aiLoad">–ó–∞–≥—Ä—É–∑–∏—Ç—å –º–æ–¥–µ–ª—å</button>
          </div>

          <div class="out" id="aiStatus">AI: –≤—ã–∫–ª—é—á–µ–Ω</div>

          <div class="row" style="margin-top:10px;">
            <button class="btn2" id="aiHelpSolve">–ü–æ–¥—Å–∫–∞–∑–∞—Ç—å –ø–æ ‚Ññ1</button>
            <button class="btn2" id="aiHelpAnalyze">–ü–æ–¥—Å–∫–∞–∑–∞—Ç—å –ø–æ ‚Ññ2</button>
          </div>

          <div class="out" id="aiOut">–û—Ç–≤–µ—Ç AI –ø–æ—è–≤–∏—Ç—Å—è —Ç—É—Ç‚Ä¶</div>
        </details>
      </aside>
    </div>

    <div class="footer">
      <b>–£—á–∏—Ç–µ–ª—é:</b> ‚Äú–ø–æ–¥–≤–æ—Ö–∏‚Äù ‚Äî –±—ã—Å—Ç—Ä—ã–π –ø—Ä–æ–≥—Ä–µ–≤ –Ω–∞ 10‚Äì20 –º–∏–Ω—É—Ç. –ü–æ—Ç–æ–º –ø—Ä–∞–∫—Ç–∏–∫–∞ 1 (—Å—Ç—Ä–æ–∫–∞ A¬±B) –∏ –ø—Ä–∞–∫—Ç–∏–∫–∞ 2 (if/else if/else + %).
    </div>
  </div>
<script src="https://cdnjs.cloudflare.com/ajax/libs/three.js/r134/three.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/vanta/0.5.24/vanta.globe.min.js"></script>

  <script>
    "use strict";
// ===== VANTA GLOBE (—Ñ–æ–Ω) =====
let vanta = null;

function supportsWebGL(){
  try{
    const c = document.createElement("canvas");
    return !!(c.getContext("webgl") || c.getContext("experimental-webgl"));
  }catch(e){ return false; }
}
function prefersReducedMotion(){
  return window.matchMedia && window.matchMedia("(prefers-reduced-motion: reduce)").matches;
}
function initVanta(){
  const el = document.getElementById("heroBg");
  if (!el || vanta) return;
  if (!supportsWebGL() || prefersReducedMotion()) return;

  vanta = VANTA.GLOBE({
    el,
    mouseControls: true,
    touchControls: true,
    gyroControls: false,
    minHeight: 240,
    minWidth: 240,
    scale: 1.0,
    scaleMobile: 0.8,
    color: 0xff00ff,      
    color2:0x7df9ff,     
    backgroundColor: 0xEEF2FF
  });
}
function destroyVanta(){
  if (vanta && vanta.destroy) vanta.destroy();
  vanta = null;
}
window.addEventListener("load", initVanta);
document.addEventListener("visibilitychange", () => {
  if (document.hidden) destroyVanta();
  else initVanta();
});
const TEACHER_CODE = "1234"; // –ø–æ–º–µ–Ω—è–π –Ω–∞ —Å–≤–æ–π

function teacherOK(){
  return prompt("–ö–æ–¥ —É—á–∏—Ç–µ–ª—è?") === TEACHER_CODE;
}

    // ===== UI helpers =====
    function dot(kind){ return '<span class="dot ' + kind + '"></span>'; }
    function ok(msg){ return dot("ok") + msg; }
    function warn(msg){ return dot("warn") + msg; }
    function bad(msg){ return dot("bad") + msg; }

    function pretty(v){
      const t = typeof v;
      if (Number.isNaN(v)) return 'NaN (type: number)';
      if (v === Infinity) return 'Infinity (type: number)';
      if (v === -Infinity) return '-Infinity (type: number)';
      if (t === "string") return JSON.stringify(v) + " (type: string)";
      if (t === "number") return String(v) + " (type: number)";
      if (t === "boolean") return String(v) + " (type: boolean)";
      if (v === null) return "null (type: object)";
      return String(v) + " (type: " + t + ")";
    }

    // ===== 1) –ü—Ä–∏–º–µ—Ä—ã-–ø–æ–¥–≤–æ—Ö–∏ (–±–µ–∑ eval –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–æ–≥–æ –≤–≤–æ–¥–∞) =====
    // –í–ê–ñ–ù–û: calc ‚Äî —Ñ—É–Ω–∫—Ü–∏—è, –∫–æ—Ç–æ—Ä–∞—è —Ä–µ–∞–ª—å–Ω–æ —Å—á–∏—Ç–∞–µ—Ç –≤—ã—Ä–∞–∂–µ–Ω–∏–µ.
    const tasks = [
      { expr: '"" + 1 + 0', calc: () => "" + 1 + 0, hint: '–ï—Å—Ç—å —Å—Ç—Ä–æ–∫–∞ ‚Üí "+" –±—É–¥–µ—Ç —Å–∫–ª–µ–∏–≤–∞—Ç—å: —Å–Ω–∞—á–∞–ª–∞ "" + 1, –ø–æ—Ç–æ–º + 0.' },
      { expr: '"" - 1 + 0', calc: () => "" - 1 + 0, hint: '"-" –ø—ã—Ç–∞–µ—Ç—Å—è –ø—Ä–µ–≤—Ä–∞—Ç–∏—Ç—å –≤ —á–∏—Å–ª–æ. "" —Å—Ç–∞–Ω–µ—Ç 0. –ü–æ—Ç–æ–º –ø—Ä–∏–±–∞–≤–∏—Ç—Å—è 0.' },
      { expr: 'true + false', calc: () => true + false, hint: '–í —á–∏—Å–ª–∞—Ö: true ‚Üí 1, false ‚Üí 0.' },
      { expr: '6 / "3"', calc: () => 6 / "3", hint: '"/" –ø—Ä–µ–≤—Ä–∞—â–∞–µ—Ç –≤ —á–∏—Å–ª–∞. "3" —Å—Ç–∞–Ω–µ—Ç 3.' },
      { expr: '"2" * "3"', calc: () => "2" * "3", hint: '"*" –ø—Ä–µ–≤—Ä–∞—â–∞–µ—Ç –≤ —á–∏—Å–ª–∞. –û–±–∞ —Å—Ç–∞–Ω—É—Ç —á–∏—Å–ª–∞–º–∏.' },
      { expr: '4 + 5 + "px"', calc: () => 4 + 5 + "px", hint: '–°–Ω–∞—á–∞–ª–∞ 4+5=9, –ø–æ—Ç–æ–º 9 + "px" ‚Üí —Å—Ç—Ä–æ–∫–∞.' },
      { expr: '"$" + 4 + 5', calc: () => "$" + 4 + 5, hint: '–°—Ç—Ä–æ–∫–∞ –µ—Å—Ç—å —Å—Ä–∞–∑—É ‚Üí –≤—Å—ë –¥–∞–ª—å—à–µ —Å–∫–ª–µ–π–∫–∞: "$4" –ø–æ—Ç–æ–º "$45".' },
      { expr: '"4" - 2', calc: () => "4" - 2, hint: '"-" –ø—Ä–µ–≤—Ä–∞—â–∞–µ—Ç "4" –≤ —á–∏—Å–ª–æ.' },
      { expr: '"4px" - 2', calc: () => "4px" - 2, hint: '"4px" –Ω–µ —Å—Ç–∞–Ω–æ–≤–∏—Ç—Å—è —á–∏—Å–ª–æ–º ‚Üí NaN.' },
      { expr: '"  -9  " + 5', calc: () => "  -9  " + 5, hint: '–ü–ª—é—Å —Å–æ —Å—Ç—Ä–æ–∫–æ–π —Å–∫–ª–µ–∏–≤–∞–µ—Ç. –ü—Ä–æ–±–µ–ª—ã –æ—Å—Ç–∞—é—Ç—Å—è.' },
      { expr: '"  -9  " - 5', calc: () => "  -9  " - 5, hint: '–ú–∏–Ω—É—Å –ø—Ä–µ–≤—Ä–∞—â–∞–µ—Ç —Å—Ç—Ä–æ–∫—É –≤ —á–∏—Å–ª–æ: –ø—Ä–æ–±–µ–ª—ã ‚Äú–Ω–µ –º–µ—à–∞—é—Ç‚Äù.' },
      { expr: 'null + 1', calc: () => null + 1, hint: '–í —á–∏—Å–ª–∞—Ö null –æ–±—ã—á–Ω–æ —Å—Ç–∞–Ω–æ–≤–∏—Ç—Å—è 0.' },
      { expr: 'undefined + 1', calc: () => undefined + 1, hint: 'undefined –≤ —á–∏—Å–ª–∞—Ö ‚Üí NaN.' },
      { expr: '" \\t \\n" - 2', calc: () => " \t \n" - 2, hint: '–ü—Ä–æ–±–µ–ª—å–Ω–∞—è —Å—Ç—Ä–æ–∫–∞ –ø—Ä–µ–≤—Ä–∞—â–∞–µ—Ç—Å—è –≤ 0, –ø–æ—Ç–æ–º 0 - 2.' },
    ];

    const exprList = document.getElementById("exprList");

    function normalizeSpaces(s){
      return String(s).replace(/\s+/g, " ").trim();
    }

    function buildExprRow(t, idx){
      const wrap = document.createElement("div");
      wrap.className = "expr";

      wrap.innerHTML = `
        <div class="exprTop">
          <div class="code">(${idx+1}) ${t.expr}</div>
          <span class="pill">–≤–≤–µ–¥–∏ –æ—Ç–≤–µ—Ç –∏ –ø—Ä–æ–≤–µ—Ä—å</span>
        </div>

       <div class="row">
  <input type="text" id="guess_${idx}" placeholder="–¢–≤–æ–π –æ—Ç–≤–µ—Ç (–Ω–∞–ø—Ä–∏–º–µ—Ä: 22)" />
  <button class="btn2" id="hintBtn_${idx}">–ü–æ–¥—Å–∫–∞–∑–∫–∞</button>
  <button class="btn2" id="ansBtn_${idx}">–û—Ç–≤–µ—Ç (—É—á–∏—Ç–µ–ª—å)</button>
  <button id="checkBtn_${idx}">–ü—Ä–æ–≤–µ—Ä–∏—Ç—å</button>
</div>


        <div class="out" id="out_${idx}">–†–µ–∑—É–ª—å—Ç–∞—Ç: ‚Äî</div>

        <details id="hint_${idx}" style="display:none;">
          <summary>–ü–æ–¥—Å–∫–∞–∑–∫–∞</summary>
          <p class="hint">${t.hint}</p>
        </details>
      `;

      const checkBtn = wrap.querySelector("#checkBtn_" + idx);
      const out = wrap.querySelector("#out_" + idx);
      const guess = wrap.querySelector("#guess_" + idx);
      const hintBtn = wrap.querySelector("#hintBtn_" + idx);
      const hintDet = wrap.querySelector("#hint_" + idx);
const ansBtn = wrap.querySelector("#ansBtn_" + idx);
let attempts = 0;

ansBtn.addEventListener("click", () => {
  if (!teacherOK()) return;
  out.innerHTML = ok(`–û—Ç–≤–µ—Ç (—É—á–∏—Ç–µ–ª—å): <b>${pretty(real)}</b>`);
});

      let real;
      try { real = t.calc(); } catch(e){ real = "ERROR: " + e.message; }

      checkBtn.addEventListener("click", () => {
        const userRaw = guess.value.trim();
        const realText = pretty(real);

        if (typeof real === "string"){
          // –°—Ç—Ä–æ–∫–æ–≤—ã–µ –æ—Ç–≤–µ—Ç—ã —Å—Ä–∞–≤–Ω–∏–≤–∞–µ–º ‚Äú–º—è–≥–∫–æ‚Äù, —á—Ç–æ–±—ã –ø—Ä–æ–±–µ–ª—ã –Ω–µ —É–±–∏–≤–∞–ª–∏ –∏–¥–µ—é
          const u = normalizeSpaces(userRaw.replace(/^["']|["']$/g, "")); // –µ—Å–ª–∏ –≤–≤–µ–ª–∏ –≤ –∫–∞–≤—ã—á–∫–∞—Ö ‚Äî –æ–∫
          const r = normalizeSpaces(real);
          if (u === r){
            out.innerHTML = ok(`–í–µ—Ä–Ω–æ ‚úÖ –û—Ç–≤–µ—Ç: <b>${realText}</b>`);
          } else {
           attempts++;
out.innerHTML = warn(`–ù–µ —Å–æ–≤–ø–∞–ª–æ ‚ùå –ü–æ–ø—Ä–æ–±—É–π –µ—â—ë —Ä–∞–∑. (–ø–æ–ø—ã—Ç–∫–∞: ${attempts})`);

          }
          return;
        }

        if (Number.isNaN(real)){
          if (userRaw.toLowerCase() === "nan"){
            out.innerHTML = ok(`–í–µ—Ä–Ω–æ ‚úÖ –û—Ç–≤–µ—Ç: <b>${realText}</b>`);
          } else {
           attempts++;
out.innerHTML = warn(`–ù–µ —Å–æ–≤–ø–∞–ª–æ ‚ùå –ü–æ–ø—Ä–æ–±—É–π –µ—â—ë —Ä–∞–∑. (–ø–æ–ø—ã—Ç–∫–∞: ${attempts})`);

          }
          return;
        }

        // –¥–ª—è —á–∏—Å–µ–ª/–±—É–ª–µ–≤—ã—Ö ‚Äî –ø—Ä–æ—Å—Ç–æ–µ —Å—Ä–∞–≤–Ω–µ–Ω–∏–µ –ø–æ —Å—Ç—Ä–æ–∫–µ
        const accepted = new Set([ String(real), realText.split(" (type:")[0] ]);
        if (accepted.has(userRaw)){
          out.innerHTML = ok(`–í–µ—Ä–Ω–æ ‚úÖ –û—Ç–≤–µ—Ç: <b>${realText}</b>`);
        } else {
         attempts++;
out.innerHTML = warn(`–ù–µ —Å–æ–≤–ø–∞–ª–æ ‚ùå –ü–æ–ø—Ä–æ–±—É–π –µ—â—ë —Ä–∞–∑. (–ø–æ–ø—ã—Ç–∫–∞: ${attempts})`);

        }
      });

      hintBtn.addEventListener("click", () => {
        const isOpen = hintDet.style.display !== "none";
        hintDet.style.display = isOpen ? "none" : "block";
        if (!isOpen) hintDet.open = true;
      });

      guess.addEventListener("keydown", (e) => {
        if (e.key === "Enter") checkBtn.click();
      });

      return wrap;
    }

    tasks.forEach((t, i) => exprList.appendChild(buildExprRow(t, i)));

    // ===== 2) –ü—Ä–∞–∫—Ç–∏–∫–∞ ‚Ññ1: solve(expr) =====
    const codeSolve = document.getElementById("codeSolve");
    const runSolveTests = document.getElementById("runSolveTests");
    const solveOut = document.getElementById("solveOut");
    const solveHint1Btn = document.getElementById("solveHint1");
const solveHint2Btn = document.getElementById("solveHint2");
const solveAnswerBtn = document.getElementById("solveAnswer");

function appendOnce(el, marker, text){
  if (el.value.includes(marker)) return;
  el.value += "\n" + text + "\n";
}

solveHint1Btn.addEventListener("click", () => {
  appendOnce(codeSolve, "// HINT1", `// HINT1: —É–±–µ—Ä–∏ –ø—Ä–æ–±–µ–ª—ã –∏ –Ω–∞–π–¥–∏ –∑–Ω–∞–∫
// expr = expr.replaceAll(" ", "");
// opIndex = expr.indexOf("+") –∏–ª–∏ expr.indexOf("-")`);
});

solveHint2Btn.addEventListener("click", () => {
  appendOnce(codeSolve, "// HINT2", `// HINT2: –≤—ã—Ç–∞—â–∏ –ª–µ–≤—É—é/–ø—Ä–∞–≤—É—é —á–∞—Å—Ç—å –∏ –ø—Ä–µ–≤—Ä–∞—Ç–∏ –≤ —á–∏—Å–ª–æ
// const left = Number(expr.slice(0, opIndex));
// const right = Number(expr.slice(opIndex + 1));`);
}); 

solveAnswerBtn.addEventListener("click", () => {
  if (!teacherOK()) return;
  codeSolve.value = solveHint; // –ø–æ–ª–Ω–æ–µ —Ä–µ—à–µ–Ω–∏–µ —Ç–æ–ª—å–∫–æ —É—á–∏—Ç–µ–ª—é
});


    fillSolveHint.addEventListener("click", () => {
      codeSolve.value = solveHint;
    });

    function runSolve(fn){
      const tests = [
        { in: "12+5", out: 17 },
        { in: "12-5", out: 7 },
        { in: "  100  - 7  ", out: 93 },
        { in: "9999999999-1", out: 9999999998 }, // –¥–æ 10 –∑–Ω–∞–∫–æ–≤
        { in: "8+0002", out: 10 },
      ];
      for (const t of tests){
        const got = fn(t.in);
        if (got !== t.out){
          return { ok:false, msg:`–û—à–∏–±–∫–∞: solve("${t.in}") –æ–∂–∏–¥–∞–ª–∏ ${t.out}, –ø–æ–ª—É—á–∏–ª–∏ ${got}. –ü—Ä–æ–≤–µ—Ä—å: –ø—Ä–æ–±–µ–ª—ã, –ø–æ–∏—Å–∫ –∑–Ω–∞–∫–∞, Number().` };
        }
      }
      return { ok:true, msg:"–ó–∞–¥–∞–Ω–∏–µ ‚Ññ1: –≤—Å–µ —Ç–µ—Å—Ç—ã –ø—Ä–æ–π–¥–µ–Ω—ã ‚úÖ" };
    }

    runSolveTests.addEventListener("click", () => {
      try{
        const userJs = codeSolve.value;
        const getFn = new Function(userJs + "\nreturn typeof solve === 'function' ? solve : null;");
        const fn = getFn();
        if (!fn){
          solveOut.innerHTML = bad("–ù–µ –≤–∏–∂—É —Ñ—É–Ω–∫—Ü–∏—é solve(expr). –ü—Ä–æ–≤–µ—Ä—å –∏–º—è –∏ —Å–∫–æ–±–∫–∏.");
          return;
        }
        const res = runSolve(fn);
        solveOut.innerHTML = res.ok ? ok(res.msg) : warn(res.msg);
      } catch(e){
        solveOut.innerHTML = bad("–û—à–∏–±–∫–∞ –≤ –∫–æ–¥–µ: " + e.message);
      }
    });

    // ===== 3) –ü—Ä–∞–∫—Ç–∏–∫–∞ ‚Ññ2: analyze(n) =====
    const codeAnalyze = document.getElementById("codeAnalyze");
    const runAnalyzeTests = document.getElementById("runAnalyzeTests");
    const analyzeOut = document.getElementById("analyzeOut");
    const fillAnalyzeHint = document.getElementById("fillAnalyzeHint");

    const analyzeHint =
`function analyze(n) {
  if (!Number.isFinite(n)) return "not a number";
  if (n < 0) return "negative";
  if (n === 0) return "zero";
  if (n % 2 === 0 && n % 3 === 0) return "divisible by 2 and 3";
  if (n % 2 === 0) return "even";
  if (n % 3 === 0) return "divisible by 3";
  return "odd";
}`;

    fillAnalyzeHint.addEventListener("click", () => {
      codeAnalyze.value = analyzeHint;
    });

    function runAnalyze(fn){
      const tests = [
        { in: NaN, out: "not a number" },
        { in: Infinity, out: "not a number" },
        { in: -5, out: "negative" },
        { in: 0, out: "zero" },
        { in: 12, out: "divisible by 2 and 3" },
        { in: 8, out: "even" },
        { in: 9, out: "divisible by 3" },
        { in: 7, out: "odd" },
      ];
      for (const t of tests){
        const got = fn(t.in);
        if (got !== t.out){
          return { ok:false, msg:`–û—à–∏–±–∫–∞: analyze(${t.in}) –æ–∂–∏–¥–∞–ª–∏ "${t.out}", –ø–æ–ª—É—á–∏–ª–∏ "${got}". –ü—Ä–æ–≤–µ—Ä—å if/else if –∏ %.` };
        }
      }
      return { ok:true, msg:"–ó–∞–¥–∞–Ω–∏–µ ‚Ññ2: –≤—Å–µ —Ç–µ—Å—Ç—ã –ø—Ä–æ–π–¥–µ–Ω—ã ‚úÖ" };
    }

    runAnalyzeTests.addEventListener("click", () => {
      try{
        const userJs = codeAnalyze.value;
        const getFn = new Function(userJs + "\nreturn typeof analyze === 'function' ? analyze : null;");
        const fn = getFn();
        if (!fn){
          analyzeOut.innerHTML = bad("–ù–µ –≤–∏–∂—É —Ñ—É–Ω–∫—Ü–∏—é analyze(n). –ü—Ä–æ–≤–µ—Ä—å –∏–º—è –∏ —Å–∫–æ–±–∫–∏.");
          return;
        }
        const res = runAnalyze(fn);
        analyzeOut.innerHTML = res.ok ? ok(res.msg) : warn(res.msg);
      } catch(e){
        analyzeOut.innerHTML = bad("–û—à–∏–±–∫–∞ –≤ –∫–æ–¥–µ: " + e.message);
      }
    });

    // ===== 4) AI helper (WebGPU) ‚Äî PROMPT LOCKED (–¥–µ—Ç–∏ –Ω–µ —Ç—Ä–æ–≥–∞—é—Ç) =====
    const aiLoad = document.getElementById("aiLoad");
    const aiHelpSolve = document.getElementById("aiHelpSolve");
    const aiHelpAnalyze = document.getElementById("aiHelpAnalyze");
    const aiStatus = document.getElementById("aiStatus");
    const aiOut = document.getElementById("aiOut");
    const aiModel = document.getElementById("aiModel");

    const AI = { webllm:null, engine:null, ready:false, loading:false };

    function aiSet(html){ aiStatus.innerHTML = html; }
    function aiWarnMsg(msg){ aiSet(warn(msg)); }
    function aiOkMsg(msg){ aiSet(ok(msg)); }
    function aiBadMsg(msg){ aiSet(bad(msg)); }

    async function ensureWebLLM(){
      if (AI.webllm) return AI.webllm;
      aiWarnMsg("–ü–æ–¥–∫–ª—é—á–∞—é WebLLM‚Ä¶");
      // –ú–æ–¥—É–ª—å —Å CDN
      AI.webllm = await import("https://esm.run/@mlc-ai/web-llm");
      return AI.webllm;
    }

    function formatProgress(p){
      if (typeof p === "number") return Math.round(p * 100) + "%";
      if (p && typeof p === "object"){
        if (typeof p.progress === "number") return Math.round(p.progress * 100) + "%";
        if (typeof p.percentage === "number") return Math.round(p.percentage) + "%";
      }
      return "‚Ä¶";
    }

    async function loadAI(){
      if (AI.loading) return;
      AI.loading = true;
      AI.ready = false;
      AI.engine = null;

      try{
        const webllm = await ensureWebLLM();
        const modelId = aiModel.value;
        const initProgressCallback = (p) => aiWarnMsg("–ó–∞–≥—Ä—É–∑–∫–∞ –º–æ–¥–µ–ª–∏: " + formatProgress(p));
        aiWarnMsg("–ó–∞–≥—Ä—É–∂–∞—é –º–æ–¥–µ–ª—å (–ø–µ—Ä–≤—ã–π —Ä–∞–∑ –¥–æ–ª–≥–æ)‚Ä¶");
        AI.engine = await webllm.CreateMLCEngine(modelId, { initProgressCallback });
        AI.ready = true;
        aiOkMsg("AI –≥–æ—Ç–æ–≤ ‚úÖ");
      } catch(e){
        aiBadMsg("AI –Ω–µ –∑–∞–ø—É—Å—Ç–∏–ª—Å—è: " + e.message + " (–æ—Ç–∫—Ä–æ–π —Å—Ç—Ä–∞–Ω–∏—Ü—É —á–µ—Ä–µ–∑ http/https)");
      } finally{
        AI.loading = false;
      }
    }

    // PROMPT LOCKED
    const SYSTEM_PROMPT =
`–¢—ã –ø–æ–º–æ—â–Ω–∏–∫ —É—á–∏—Ç–µ–ª—è JavaScript –¥–ª—è –¥–µ—Ç–µ–π 10‚Äì14.
–î–∞–π –∫–æ—Ä–æ—Ç–∫—É—é, –ø–æ–Ω—è—Ç–Ω—É—é –ø–æ–¥—Å–∫–∞–∑–∫—É –ø–æ –∫–æ–¥—É —É—á–µ–Ω–∏–∫–∞.
–°—Ç—Ä–æ–≥–æ —Ñ–æ—Ä–º–∞—Ç:
1) –ì–ª–∞–≤–Ω–∞—è –æ—à–∏–±–∫–∞ (1 –ø—Ä–µ–¥–ª–æ–∂–µ–Ω–∏–µ)
2) –ß—Ç–æ –∏—Å–ø—Ä–∞–≤–∏—Ç—å (–¥–æ 3 –ø—É–Ω–∫—Ç–æ–≤)
3) –ú–∏–Ω–∏-–ø—Ä–∞–≤–∏–ª—å–Ω—ã–π –ø—Ä–∏–º–µ—Ä (–¥–æ 10 —Å—Ç—Ä–æ–∫ –∫–æ–¥–∞)
–ù–µ –ø–∏—à–∏ –¥–ª–∏–Ω–Ω—ã—Ö –ª–µ–∫—Ü–∏–π.`;

    async function askAI(userPayload){
      if (!AI.ready || !AI.engine){
        aiWarnMsg("–°–Ω–∞—á–∞–ª–∞ –Ω–∞–∂–º–∏ ‚Äú–ó–∞–≥—Ä—É–∑–∏—Ç—å –º–æ–¥–µ–ª—å‚Äù.");
        return;
      }
      aiOut.textContent = "AI –¥—É–º–∞–µ—Ç‚Ä¶";
      try{
        const reply = await AI.engine.chat.completions.create({
          messages: [
            { role:"system", content: SYSTEM_PROMPT },
            { role:"user", content: userPayload }
          ],
          temperature: 0.2
        });
        aiOut.textContent = reply.choices?.[0]?.message?.content || "–ü—É—Å—Ç–æ–π –æ—Ç–≤–µ—Ç.";
      } catch(e){
        aiOut.textContent = "–û—à–∏–±–∫–∞ AI: " + e.message;
      }
    }

    aiLoad.addEventListener("click", loadAI);

    aiHelpSolve.addEventListener("click", async () => {
      const code = codeSolve.value;
      const tests = (solveOut.innerText || "").trim();
      const payload =
`–ó–∞–¥–∞–Ω–∏–µ ‚Ññ1: —Ñ—É–Ω–∫—Ü–∏—è solve(expr) —Å—á–∏—Ç–∞–µ—Ç —Å—Ç—Ä–æ–∫—É "A+B" –∏–ª–∏ "A-B" (–º–æ–≥—É—Ç –±—ã—Ç—å –ø—Ä–æ–±–µ–ª—ã).
–ö–æ–¥ —É—á–µ–Ω–∏–∫–∞:
${code}

–†–µ–∑—É–ª—å—Ç–∞—Ç —Ç–µ—Å—Ç–æ–≤:
${tests}

–ü–æ–¥—Å–∫–∞–∂–∏, —á—Ç–æ –∏—Å–ø—Ä–∞–≤–∏—Ç—å.`;
      await askAI(payload);
    });

    aiHelpAnalyze.addEventListener("click", async () => {
      const code = codeAnalyze.value;
      const tests = (analyzeOut.innerText || "").trim();
      const payload =
`–ó–∞–¥–∞–Ω–∏–µ ‚Ññ2: —Ñ—É–Ω–∫—Ü–∏—è analyze(n) –¥–µ–ª–∞–µ—Ç —Ü–µ–ø–æ—á–∫—É if/else if/else —Å % –∏ –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç –æ–¥–Ω—É —Å—Ç—Ä–æ–∫—É.
–ö–æ–¥ —É—á–µ–Ω–∏–∫–∞:
${code}

–†–µ–∑—É–ª—å—Ç–∞—Ç —Ç–µ—Å—Ç–æ–≤:
${tests}

–ü–æ–¥—Å–∫–∞–∂–∏, —á—Ç–æ –∏—Å–ø—Ä–∞–≤–∏—Ç—å.`;
      await askAI(payload);
    });

    aiSet(warn("AI: –≤—ã–∫–ª—é—á–µ–Ω"));
    
  </script>
</body>
</html>
