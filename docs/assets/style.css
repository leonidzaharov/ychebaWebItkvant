:root{
  --radius: 18px;
  --shadow: 0 16px 50px rgba(0,0,0,.35);
}

/* THEME */
html[data-theme="dark"]{
  --bg0:#070913;
  --bg1:#0b0f22;
  --panel: rgba(10,12,18,.35);
  --text:#eaf0ff;
  --muted:#b9c4e6;
  --stroke: rgba(255,255,255,.10);
  --accent:#7c5cff;
  --accent2:#00e0ff;
}

html[data-theme="light"]{
  --bg0:#f5f7ff;
  --bg1:#e9eeff;
  --panel: rgba(255,255,255,.70);
  --text:#0c1020;
  --muted:#3b4768;
  --stroke: rgba(20,30,60,.14);
  --accent:#5b4bff;
  --accent2:#00a8c8;
}

*{box-sizing:border-box}

html{
  min-height: 100%;
  background:
    radial-gradient(900px 520px at 20% 10%, color-mix(in srgb, var(--accent) 25%, transparent), transparent 60%),
    radial-gradient(900px 640px at 80% 20%, color-mix(in srgb, var(--accent2) 20%, transparent), transparent 60%),
    linear-gradient(180deg, var(--bg0), var(--bg1));
}
body{
  margin:0;
  min-height: 100vh;
  font-family: ui-sans-serif, system-ui, -apple-system, Segoe UI, Roboto, Arial;
  color:var(--text);
  background: transparent;
}

.topbar{
  position:sticky; top:0; z-index:10;
  display:flex; align-items:center; justify-content:space-between; gap:14px;
  padding:14px 18px;
  backdrop-filter: blur(12px);
  background: linear-gradient(180deg, color-mix(in srgb, var(--panel) 88%, transparent), color-mix(in srgb, var(--panel) 55%, transparent));
  border-bottom:1px solid var(--stroke);
}

.brand{display:flex; align-items:center; gap:12px}
.logo{
  width:38px; height:38px; border-radius:12px;
  display:grid; place-items:center;
  border:1px solid var(--stroke);
  background: linear-gradient(135deg, color-mix(in srgb, var(--accent) 35%, transparent), color-mix(in srgb, var(--accent2) 20%, transparent));
}

.brandTitle{font-weight:900; letter-spacing:.2px}
.brandSub{font-size:12px; color:var(--muted); margin-top:2px}
.controls{display:flex; gap:10px; flex-wrap:wrap}

.btn{
  border:1px solid var(--stroke);
  background: linear-gradient(135deg, color-mix(in srgb, var(--accent) 55%, transparent), color-mix(in srgb, var(--accent2) 25%, transparent));
  color:var(--text);
  padding:10px 12px;
  border-radius:14px;
  cursor:pointer;
  font-weight:800;
  text-decoration:none;
}
.btn.ghost{background: color-mix(in srgb, var(--panel) 70%, transparent)}
.btn:hover{filter: brightness(1.06)}

.wrap{max-width:1100px; margin:0 auto; padding:18px 16px 44px}

/* HERO */
.hero{
  position:relative;
  min-height: 320px;
  border-radius: var(--radius);
  border:1px solid var(--stroke);
  box-shadow: var(--shadow);
  overflow: visible; /* важно: попап не режем */
  background: transparent;
}
.heroBg{
  position:absolute;
  inset:0;
  border-radius: var(--radius);
  overflow: hidden;        /* режем только фон */
  pointer-events: none;    /* чтобы фон не мешал кликам */
  z-index: 1;

  /* фолбэк, если Vanta не запустится */
  background: linear-gradient(180deg,
    color-mix(in srgb, var(--panel) 55%, transparent),
    color-mix(in srgb, var(--panel) 35%, transparent)
  );
}

/* затемнение поверх Vanta, чтобы текст читался */
.heroOverlay{
  position:relative; z-index: 2; 
  padding:22px;
  display:flex; flex-direction:column; justify-content:center;
  background: radial-gradient(800px 400px at 30% 30%, rgba(0,0,0,.18), transparent 60%),
              linear-gradient(180deg, rgba(0,0,0,.12), rgba(0,0,0,.22));
              
}
html[data-theme="light"] .heroOverlay{
  background: radial-gradient(800px 400px at 30% 30%, rgba(255,255,255,.18), transparent 60%),
              linear-gradient(180deg, rgba(255,255,255,.10), rgba(255,255,255,.20));
}

.hero h1{margin:0 0 8px 0; font-size:34px}
.hero p{margin:0; color: color-mix(in srgb, var(--muted) 92%, var(--text)); max-width: 60ch}
.heroActions{display:flex; gap:10px; flex-wrap:wrap; margin-top:14px}

/* cards */
.tracks{
  margin-top:16px;
  display:grid;
  grid-template-columns: repeat(auto-fit, minmax(220px, 1fr));
  gap:12px;
}
.card{
  border:1px solid var(--stroke);
  border-radius: var(--radius);
  padding:14px;
  background: color-mix(in srgb, var(--panel) 75%, transparent);
  color:var(--text);
  text-decoration:none;
   transition: transform .15s ease, border-color .15s ease, box-shadow .15s ease;
}
.card:hover{transform: translateY(-2px); border-color: color-mix(in srgb, var(--accent2) 45%, var(--stroke))}
/* Нормальная подсветка при клике/табом */
.card:focus,
.card:focus-visible{
  outline: none;
  border-color: color-mix(in srgb, var(--accent2) 55%, var(--stroke));
  box-shadow: 0 0 0 4px color-mix(in srgb, var(--accent2) 22%, transparent);
}

/* Эффект "нажал" */
.card:active{
  transform: translateY(0);
}

.cardIcon{font-size:20px}
.cardTitle{font-weight:900; margin-top:8px}
.cardText{color:var(--muted); font-size:13px; margin-top:6px; line-height:1.4}

.about{
  margin-top:18px;
  border:1px solid var(--stroke);
  border-radius: var(--radius);
  padding:14px;
  background: color-mix(in srgb, var(--panel) 70%, transparent);
}
.about h2{margin:0 0 8px 0}
.about ul{margin:0; color:var(--muted)}

/* Карточка с подсказкой */
/* --- HOW CARD (popup) --- */
.heroActions{ position: relative; }

.howCard{
  position: absolute;
  left: 0;
  top: calc(100% + 12px);
  width: min(560px, 92vw);

  border: 1px solid var(--stroke);
  border-radius: var(--radius);
  background: color-mix(in srgb, var(--panel) 82%, transparent);
  box-shadow: var(--shadow);
  backdrop-filter: blur(10px);

  padding: 12px;
  z-index: 20;

  opacity: 0;
  transform: translateY(8px) scale(.98);
  pointer-events: none;
  transition: opacity .18s ease, transform .18s ease;
}

.howCard.open{
  opacity: 1;
  transform: translateY(0) scale(1);
  pointer-events: auto;
}

/* маленький "носик" */
.howCard::before{
  content:"";
  position:absolute;
  top:-8px;
  left: 110px;
  width: 14px; height: 14px;
  transform: rotate(45deg);
  background: inherit;
  border-left: 1px solid var(--stroke);
  border-top: 1px solid var(--stroke);
}

.howHead{
  display:flex;
  align-items:center;
  justify-content:space-between;
  gap: 10px;
  margin-bottom: 8px;
}

.howTitle{ font-weight: 900; }
.iconBtn{
  width: 34px; height: 34px;
  border-radius: 12px;
  border: 1px solid var(--stroke);
  background: color-mix(in srgb, var(--panel) 70%, transparent);
  color: var(--text);
  cursor: pointer;
  font-size: 20px;
  line-height: 1;
}
.iconBtn:hover{ filter: brightness(1.06); }

.howBody{ display:flex; flex-direction:column; gap: 10px; }
.howStep{
  display:flex; gap: 10px; align-items:flex-start;
  color: var(--muted);
  line-height: 1.35;
}
.stepDot{
  width: 22px; height: 22px;
  border-radius: 999px;
  display:grid; place-items:center;
  font-weight: 900;
  color: var(--text);
  border: 1px solid var(--stroke);
  background: linear-gradient(135deg,
    color-mix(in srgb, var(--accent) 55%, transparent),
    color-mix(in srgb, var(--accent2) 25%, transparent)
  );
  flex: 0 0 22px;
  margin-top: 1px;
}

.howHint{
  margin-top: 4px;
  padding-top: 10px;
  border-top: 1px dashed var(--stroke);
  color: var(--muted);
  font-size: 13px;
}

/* немного приятнее hover/focus на кнопках */
.btn{ transition: transform .15s ease, filter .15s ease, box-shadow .15s ease; }
.btn:hover{ transform: translateY(-1px); }
.btn:active{ transform: translateY(0); }
.btn:focus-visible{
  outline: none;
  box-shadow: 0 0 0 4px color-mix(in srgb, var(--accent2) 22%, transparent);
}
.block{ margin-top: 18px; }
.blockTitle{ margin: 0 0 10px 0; }

.cardsGrid{
  display:grid;
  grid-template-columns: repeat(auto-fit, minmax(240px, 1fr));
  gap: 12px;
}

/* карточки тем/шпаргалок (используем твой .card, добавим “малую” вариацию) */
.card.small{
  padding: 14px;
}
.cardMeta{
  margin-top: 6px;
  color: var(--muted);
  font-size: 12px;
}
/* Уроки: всегда строчками (1 колонка) */
#lessons { grid-template-columns: 1fr; }

/* Ограничиваем высоту и даём внутренний скролл */
.lessonsScroll{
   max-height: 340px;
  overflow: auto;
  padding: 4px 6px; 
}
.bgToggle{
  position: fixed;
  top: 14px;
  right: 14px;
  z-index: 9999;

  padding: 10px 14px;
  border-radius: 10px;
  border: 1px solid rgba(0, 212, 255, 0.35);
  background: rgba(10, 14, 39, 0.65);
  color: #e2e8f0;
  font-weight: 700;
  cursor: pointer;
  backdrop-filter: blur(8px);
  transition: transform .15s ease, background .2s ease, border-color .2s ease;
}

.bgToggle:hover{
  transform: translateY(-1px);
  border-color: rgba(0, 212, 255, 0.65);
  background: rgba(10, 14, 39, 0.8);
}
